!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.TalendReactCmfRouter=t():e.TalendReactCmfRouter=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=12)}([function(e,t){e.exports=TalendReactCmf},function(e,t){e.exports=PropTypes},function(e,t){e.exports=React},function(e,t){e.exports=ReduxSaga},function(e,t){e.exports=_},function(e,t){e.exports=ReactRouter},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.routerMiddleware=t.routerActions=t.goForward=t.goBack=t.go=t.replace=t.push=t.CALL_HISTORY_METHOD=t.routerReducer=t.LOCATION_CHANGE=t.syncHistoryWithStore=void 0;var n=r(7);Object.defineProperty(t,"LOCATION_CHANGE",{enumerable:!0,get:function(){return n.LOCATION_CHANGE}}),Object.defineProperty(t,"routerReducer",{enumerable:!0,get:function(){return n.routerReducer}});var o=r(8);Object.defineProperty(t,"CALL_HISTORY_METHOD",{enumerable:!0,get:function(){return o.CALL_HISTORY_METHOD}}),Object.defineProperty(t,"push",{enumerable:!0,get:function(){return o.push}}),Object.defineProperty(t,"replace",{enumerable:!0,get:function(){return o.replace}}),Object.defineProperty(t,"go",{enumerable:!0,get:function(){return o.go}}),Object.defineProperty(t,"goBack",{enumerable:!0,get:function(){return o.goBack}}),Object.defineProperty(t,"goForward",{enumerable:!0,get:function(){return o.goForward}}),Object.defineProperty(t,"routerActions",{enumerable:!0,get:function(){return o.routerActions}});var a=c(r(10)),u=c(r(11));function c(e){return e&&e.__esModule?e:{default:e}}t.syncHistoryWithStore=a.default,t.routerMiddleware=u.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.routerReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.type,u=t.payload;if(r===o)return n({},e,{locationBeforeTransitions:u});return e};var o=t.LOCATION_CHANGE="@@router/LOCATION_CHANGE",a={locationBeforeTransitions:null}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.CALL_HISTORY_METHOD="@@router/CALL_HISTORY_METHOD";function o(e){return function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return{type:n,payload:{method:e,args:r}}}}var a=t.push=o("push"),u=t.replace=o("replace"),c=t.go=o("go"),i=t.goBack=o("goBack"),s=t.goForward=o("goForward");t.routerActions={push:a,replace:u,go:c,goBack:i,goForward:s}},function(e,t){e.exports=ReactRedux},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=r.selectLocationState,c=void 0===u?a:u,i=r.adjustUrlOnReplay,s=void 0===i||i;if(void 0===c(t.getState()))throw new Error("Expected the routing state to be available either as `state.routing` or as the custom expression you can specify as `selectLocationState` in the `syncHistoryWithStore()` options. Ensure you have added the `routerReducer` to your store's reducers via `combineReducers` or whatever method you use to isolate your reducers.");var f=void 0,p=void 0,l=void 0,d=void 0,g=void 0,m=function(e){return c(t.getState()).locationBeforeTransitions||(e?f:void 0)};if(f=m(),s){var y=function(){var t=m(!0);g!==t&&f!==t&&(p=!0,g=t,e.transitionTo(n({},t,{action:"PUSH"})),p=!1)};l=t.subscribe(y),y()}var h=function(e){p||(g=e,!f&&(f=e,m())||t.dispatch({type:o.LOCATION_CHANGE,payload:e}))};d=e.listen(h),e.getCurrentLocation&&h(e.getCurrentLocation());return n({},e,{listen:function(r){var n=m(!0),o=!1,a=t.subscribe((function(){var e=m(!0);e!==n&&(n=e,o||r(n))}));return e.getCurrentLocation||r(n),function(){o=!0,a()}},unsubscribe:function(){s&&l(),d()}})};var o=r(7),a=function(e){return e.routing}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){return function(t){return function(r){if(r.type!==n.CALL_HISTORY_METHOD)return t(r);var o=r.payload,a=o.method,u=o.args;e[a].apply(e,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(u))}}}};var n=r(8)},function(e,t,r){"use strict";r.r(t),r.d(t,"routerAPI",(function(){return te}));var n={};r.r(n),r.d(n,"getLocation",(function(){return x})),r.d(n,"getPath",(function(){return j})),r.d(n,"matchPath",(function(){return _}));var o=r(2),a=r.n(o),u=r(5),c=r(6),i=r(0),s=r.n(i),f=r(1),p=r.n(f),l=r(9);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function y(e,t){return s.a.registry.getFromRegistry("".concat("_.route.hook",":").concat(e),t)}function h(e,t,r){if(t.component&&(t.component=function(e,t){t.view&&console.warn("DEPRECATED: view is deprecated please use componentId");var r=e;e.CMFContainer||(r=Object(i.cmfConnect)({})(e));var n=function(e){return a.a.createElement(r,m({view:t.view,componentId:t.componentId},e))};return n.displayName="WithProps",n.WrappedComponent=r,n.propTypes={view:p.a.string,componentId:p.a.string},n}(s.a.component.get(t.component,e),t)),t.components,t.getComponent&&(t.getComponent=y(t.getComponent,e)),t.getComponents&&(t.getComponents=y(t.getComponents,e)),t.onEnter){var n=y(t.onEnter,e);t.onEnter=function(e,t){return n({router:{nextState:e,replace:t},dispatch:r})}}if(t.onLeave){var o=y(t.onLeave,e);t.onLeave=function(e,t){return o({router:{nextState:e,replace:t},dispatch:r})}}t.childRoutes&&t.childRoutes.forEach((function(t){return h(e,t,r)})),t.indexRoute&&h(e,t.indexRoute,r)}var b={loadComponents:h,getRoutesFromSettings:function(e,t,r){var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t);return h(e,n,r),n},registerFunction:function(e,t){if("function"!=typeof t)throw new Error("registerFunction wait for a function");s.a.registry.addToRegistry("".concat("_.route.hook",":").concat(e),t)},getFunction:y};function v(e,t){var r=b.getRoutesFromSettings(t,e.routes,e.dispatch);return"/"===r.path&&r.component?a.a.createElement(u.Router,{routes:r,history:e.history}):e.loading?a.a.createElement(i.Inject,{component:e.loading}):a.a.createElement("div",{className:"is-loading"},"loading")}v.propTypes={dispatch:p.a.func,history:p.a.object,routes:p.a.object,loading:p.a.node},v.contextTypes={registry:p.a.object},v.displayName="Router";var O=Object(l.connect)((function(e){return{routes:e.cmf.settings.routes}}))(v),R={REGISTRY_HOOK_PREFIX:"_.route.hook"};function x(e){return e.routing.locationBeforeTransitions}function j(e){return x(e).pathname}function _(e,t){return s.a.router.matchPath(j(e),t)}var C=r(4);var E={"cmf.router.matchPath":function(e,t,r,n){var o=j(e.context.store.getState()),a=s.a.router.matchPath(o,t);if(r){if("params"===r)throw new Error(R.ERROR_ROUTER_DONT_GET_PARAMS);return Object(C.get)(a,r,n)}return null!==a},"cmf.router.location":function(e,t){var r=x(e.context.store.getState());return t?Object(C.get)(r,t):r}},w=r(3),P=regeneratorRuntime.mark(N);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var A=w.effects,S=A.spawn,k=A.take,L=A.cancel;function H(e,t,r){return!(!t||e&&(!e||!e.saga||e.saga.isRunning()))&&(!0!==r.runOnExactMatch||t.isExact)}function M(e,t,r){return!(!e||!e.saga.isRunning()||t&&!0!==r.runOnExactMatch)}function I(e,t,r){return!(!t||!e||!0!==r.restartOnRouteChange&&Object(C.isEqual)(e.match.params,t.params))}function F(e,t,r){return{match:s.a.router.matchPath(r.pathname,{path:e}),maybeSaga:t[e]}}function N(e,t){var r,n,o,a,u,c,i,s,f,p,l,d,g,m,y;return regeneratorRuntime.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:r={},n=Object.keys(t);case 2:0,o=[],a=e.getCurrentLocation(),u=0;case 6:if(!(u<n.length)){h.next=25;break}if(c=n[u],i=t[c],s=F(c,r,a),f=s.match,!M(p=s.maybeSaga,f,i)){h.next=15;break}return h.next=13,L(p.saga);case 13:h.next=22;break;case 15:if(!I(p,f,i)){h.next=21;break}return h.next=18,L(p.saga);case 18:o.push({routeFragment:c,match:f}),h.next=22;break;case 21:H(p,f,i)&&o.push({routeFragment:c,match:f});case 22:u+=1;case 23:h.next=6;break;case 25:l=0;case 26:if(!(l<o.length)){h.next=38;break}return d=o[l],g=d.routeFragment,m=d.match,y=t[g],"object"===T(t[g])&&(y=t[g].saga),h.next=32,S(y,m.params,m.isExact);case 32:h.t0=h.sent,h.t1=m,r[g]={saga:h.t0,match:h.t1},l+=1;case 36:h.next=26;break;case 38:return h.next=40,k("@@router/LOCATION_CHANGE");case 40:h.next=2;break;case 42:case"end":return h.stop()}}),P)}var D=regeneratorRuntime.mark(Q),G=regeneratorRuntime.mark(X),B=w.effects,Y=B.take,W=B.takeLatest;function U(e,t,r){var n=function(e,t){var r=e;return t&&(r=t.endsWith("/")?"".concat(t).concat(e):"".concat(t,"/").concat(e)),r.replace(/[(]/g,"").replace(/[)]/g,"?")}(e.path,r);e.documentTitle&&t.set(n,e.documentTitle);var o=e.childRoutes;return o&&o instanceof Array&&o.forEach((function(e){U(e,t,n)})),t}function q(e,t,r){var n=r;return e.forEach((function(e,r){var o=s.a.router.matchPath(t,{path:r});o&&o.isExact&&(n=e)})),n}function K(e){e&&(document.title=e)}function Q(e){var t,r,n,o;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t=e.settings,r=U(t.routes,new Map),K(n=r.get("/"));case 4:return a.next=6,Y("@@router/LOCATION_CHANGE");case 6:o=a.sent,K(q(r,o.payload.pathname,n));case 9:a.next=4;break;case 11:case"end":return a.stop()}}),D)}function X(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W("REACT_CMF.REQUEST_SETTINGS_OK",Q);case 2:case"end":return e.stop()}}),G)}var z=function(e){return function(t){return function(r){var n=r.cmf;if(!n)return t(r);if(n.routerPush||n.routerReplace){var o=n.routerPush||n.routerReplace;"function"==typeof o&&(o=o(r)),e.dispatch({type:"@@router/CALL_HISTORY_METHOD",payload:{method:n.routerPush?"push":"replace",args:[o]}})}return t(r)}}},J=w.effects,V=J.fork,Z=J.takeLatest,$={history:s.a.module.merge.getUnique,sagaRouterConfig:s.a.module.merge.mergeObjects,routerFunctions:s.a.module.merge.mergeObjects,startOnAction:s.a.module.merge.getUnique};function ee(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(s.a.module.merge.getReduceConfig($),{})}t.default=function(){var e=regeneratorRuntime.mark(o),t=ee.apply(void 0,arguments),r=t.history||u.hashHistory,n={};function o(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,e.next=3,V(X);case 3:if(!t.sagaRouterConfig){e.next=11;break}if(!t.startOnAction){e.next=9;break}return e.next=7,Z(t.startOnAction,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}return e.next=3,V(N,r,t.sagaRouterConfig);case 3:n=!0;case 4:case"end":return e.stop()}}),e)})));case 7:e.next=11;break;case 9:return e.next=11,V(N,r,t.sagaRouterConfig);case 11:case"end":return e.stop()}}),e)}t.routerFunctions&&Object.keys(t.routerFunctions).reduce((function(e,r){return e["".concat("_.route.hook",":").concat(r)]=t.routerFunctions[r],e}),n);var i,s=[Object(c.routerMiddleware)(r),z];function f(e){i=Object(c.syncHistoryWithStore)(r,e)}function p(){return a.a.createElement(O,{history:i})}return{cmfModule:{id:"react-cmf-router",expressions:E,reducer:{routing:c.routerReducer},middlewares:s,saga:o,storeCallback:f,registry:n},RootComponent:p}};var te={selectors:n,matchPath:s.a.router.matchPath}}])}));