!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.ReactHookForm=r():e.ReactHookForm=r()}(this,(function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var s=r[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var s in e)t.d(n,s,function(r){return e[r]}.bind(null,s));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";e.exports=t(1)},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(2),s=e=>e instanceof HTMLElement;const c="blur",u="change",i="input",a="onChange",o="onSubmit",l="pattern",f="required";var d=e=>null==e;const y=e=>"object"==typeof e;var g=e=>!d(e)&&!Array.isArray(e)&&y(e)&&!(e instanceof Date),b=e=>!Array.isArray(e)&&(/^\w*$/.test(e)||!/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/.test(e)),m=e=>e.filter(Boolean),h=e=>m(e.replace(/["|']/g,"").replace(/\[/g,".").replace(/\]/g,"").split("."));function p(e,r,t){let n=-1;const s=b(r)?[r]:h(r),c=s.length,u=c-1;for(;++n<c;){const r=s[n];let c=t;if(n!==u){const t=e[r];c=g(t)||Array.isArray(t)?t:isNaN(+s[n+1])?{}:[]}e[r]=c,e=e[r]}return e}var v=(e,r={})=>{for(const t in e)b(t)?r[t]=e[t]:p(r,t,e[t]);return r},O=e=>void 0===e,A=(e,r,t)=>{const n=m(r.split(/[,[\].]+?/)).reduce((e,r)=>d(e)?e:e[r],e);return O(n)||n===e?O(e[r])?t:e[r]:n},j=(e,r)=>{s(e)&&e.removeEventListener&&(e.removeEventListener(i,r),e.removeEventListener(u,r),e.removeEventListener(c,r))};const R={isValid:!1,value:""};var F=e=>Array.isArray(e)?e.reduce((e,r)=>r&&r.ref.checked?{isValid:!0,value:r.ref.value}:e,R):R,V=e=>"radio"===e.type,x=e=>"file"===e.type,C=e=>"checkbox"===e.type,S=e=>"select-multiple"===e.type;const k={value:!1,isValid:!1},w={value:!0,isValid:!0};var E=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(e=>e&&e.ref.checked).map(({ref:{value:e}})=>e);return{value:r,isValid:!!r.length}}const{checked:r,value:t,attributes:n}=e[0].ref;return r?n&&!O(n.value)?O(t)||""===t?w:{value:t,isValid:!0}:w:k}return k};function D(e,r,t,n){const s=e.current[r];if(s){const{ref:{value:e,disabled:r},ref:t}=s;if(r&&n)return;return x(t)?t.files:V(t)?F(s.options).value:S(t)?(c=t.options,[...c].filter(({selected:e})=>e).map(({value:e})=>e)):C(t)?E(s.options).value:e}var c;if(t)return A(t.current,r)}function B(e){return!e||e instanceof HTMLElement&&e.nodeType!==Node.DOCUMENT_NODE&&B(e.parentNode)}var L=e=>g(e)&&!Object.keys(e).length,P=e=>"boolean"==typeof e;function T(e,r){const t=b(r)?[r]:h(r),n=1==t.length?e:function(e,r){const t=r.slice(0,-1).length;let n=0;for(;n<t;)e=O(e)?n++:e[r[n++]];return e}(e,t),s=t[t.length-1];let c=void 0;n&&delete n[s];for(let r=0;r<t.slice(0,-1).length;r++){let n=-1,s=void 0;const u=t.slice(0,-(r+1)),i=u.length-1;for(r>0&&(c=e);++n<u.length;){const r=u[n];s=s?s[r]:e[r],i===n&&(g(s)&&L(s)||Array.isArray(s)&&!s.filter(e=>g(e)&&!L(e)||P(e)).length)&&(c?delete c[r]:delete e[r]),c=s}}return e}const M=(e,r)=>e&&e.ref===r;var N=e=>"string"==typeof e,W=e=>d(e)||!y(e);var $=(e,r,t,n)=>{const s={};for(const r in e.current)(O(n)||(N(n)?r.startsWith(n):Array.isArray(n)&&n.find(e=>r.startsWith(e))))&&(s[r]=D(e,r,void 0,t));return function e(r,t){if(W(r)||W(t))return t;for(const n in t){const s=r[n],c=t[n];try{r[n]=g(s)&&g(c)||Array.isArray(s)&&Array.isArray(c)?e(s,c):c}catch(r){}}return r}(v(Object.assign({},(r||{}).current||{})),v(s))};function _(e=[],r=[],t){const n=Object.keys(e),s=Object.keys(r);if(n.length!==s.length)return!1;for(const s of n)if(!t||!["ref","context"].includes(s)){const n=e[s],c=r[s];if((g(n)||Array.isArray(n))&&(g(c)||Array.isArray(c))?!_(n,c,t):n!==c)return!1}return!0}var H=e=>e instanceof RegExp,U=e=>{return g(r=e)&&!H(r)?e:{value:e,message:""};var r},I=e=>"function"==typeof e,q=e=>N(e)||g(e)&&n.isValidElement(e);function z(e,r,t="validate"){if(q(e)||P(e)&&!e)return{type:t,message:q(e)?e:"",ref:r}}var G=(e,r,t,n,s)=>{if(r){const r=t[e];return Object.assign(Object.assign({},r),{types:Object.assign(Object.assign({},r&&r.types?r.types:{}),{[n]:s||!0})})}return{}},J=async(e,r,{ref:t,ref:{type:n,value:s},options:c,required:u,maxLength:i,minLength:a,min:o,max:y,pattern:b,validate:m},h)=>{const p=e.current,v=t.name,O={},A=V(t),j=C(t),R=A||j,x=""===s,S=G.bind(null,v,r,O),k=(e,r,n,s="maxLength",c="minLength")=>{const u=e?r:n;O[v]=Object.assign({type:e?s:c,message:u,ref:t},S(e?s:c,u))};if(u&&(!A&&!j&&(x||d(s))||P(s)&&!s||j&&!E(c).isValid||A&&!F(c).isValid)){const{value:e,message:n}=q(u)?{value:!!u,message:u}:U(u);if(e&&(O[v]=Object.assign({type:f,message:n,ref:R?((p[v].options||[])[0]||{}).ref:t},S(f,n)),!r))return O}if(!d(o)||!d(y)){let e,c;const{value:u,message:i}=U(y),{value:a,message:l}=U(o);if("number"===n||!n&&!isNaN(s)){const r=t.valueAsNumber||parseFloat(s);d(u)||(e=r>u),d(a)||(c=r<a)}else{const r=t.valueAsDate||new Date(s);N(u)&&(e=r>new Date(u)),N(a)&&(c=r<new Date(a))}if((e||c)&&(k(!!e,i,l,"max","min"),!r))return O}if(N(s)&&!x&&(i||a)){const{value:e,message:t}=U(i),{value:n,message:c}=U(a),u=s.toString().length,o=!d(e)&&u>e,l=!d(n)&&u<n;if((o||l)&&(k(!!o,t,c),!r))return O}if(b&&!x){const{value:e,message:n}=U(b);if(H(e)&&!e.test(s)&&(O[v]=Object.assign({type:l,message:n,ref:t},S(l,n)),!r))return O}if(m){const n=D(e,v,h),s=R&&c?c[0].ref:t;if(I(m)){const e=z(await m(n),s);if(e&&(O[v]=Object.assign(Object.assign({},e),S("validate",e.message)),!r))return O}else if(g(m)){let e={};for(const[t,c]of Object.entries(m)){if(!L(e)&&!r)break;const u=z(await c(n),s,t);u&&(e=Object.assign(Object.assign({},u),S(t,u.message)),r&&(O[v]=e))}if(!L(e)&&(O[v]=Object.assign({ref:s},e),!r))return O}}return O};const K=(e,r)=>Object.entries(r).map(([t,n])=>((r,t,n)=>{const s=n?`${e}.${r}`:`${e}[${r}]`;return W(t)?s:K(s,t)})(t,n,g(r))).flat(1/0);var Q=(e,r,t,n,s)=>{let c;return t.add(r),L(e)?c=void 0:(c=A(e,r),(g(c)||Array.isArray(c))&&K(r,c).forEach(e=>t.add(e))),O(c)?s?n:A(n,r):c},X=({isOnBlur:e,isOnChange:r,isOnTouch:t,isTouched:n,isReValidateOnBlur:s,isReValidateOnChange:c,isBlurEvent:u,isSubmitted:i,isOnAll:a})=>!a&&(!i&&t?!(n||u):(i?s:e)?!u:!(i?c:r)||u),Y=e=>e.substring(0,e.indexOf("["));const Z=(e,r)=>RegExp(`^${r}[\\d+]`.replace(/\[/g,"\\[").replace(/\]/g,"\\]")).test(e);var ee=(e,r)=>[...e].some(e=>Z(r,e));function re(e){let r;if(W(e))return e;if(e instanceof Date)return r=new Date(e.getTime()),r;r=Array.isArray(e)?[]:{};for(const t in e)r[t]=re(e[t]);return r}var te=e=>({isOnSubmit:!e||e===o,isOnBlur:"onBlur"===e,isOnChange:e===a,isOnAll:"all"===e,isOnTouch:"onTouched"===e}),ne=e=>V(e)||C(e);const se="undefined"==typeof window,ce="undefined"!=typeof document&&!se&&!O(window.HTMLElement),ue=ce?"Proxy"in window:"undefined"!=typeof Proxy;function ie(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)r.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(t[n[s]]=e[n[s]])}return t}const ae=n.createContext(null);ae.displayName="RHFContext";const oe=()=>n.useContext(ae);var le=()=>{const e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(r){const t=(16*Math.random()+e)%16|0;return("x"==r?t:3&t|8).toString(16)}))},fe=(e,r)=>O(r)?[]:Array.isArray(r)?function(e,r){let t=-1;for(;++t<e.length;)r.indexOf(t)>=0&&delete e[t];return m(e)}(e,r):((e,r)=>[...e.slice(0,r),...e.slice(r+1)])(e,r),de=(e,r,t)=>Array.isArray(e)?(O(e[t])&&(e[t]=void 0),e.splice(t,0,e.splice(r,1)[0]),e):[],ye=(e,r,t)=>{const n=[e[t],e[r]];e[r]=n[0],e[t]=n[1]};function ge(e,r){return[...Array.isArray(r)?r:[r||void 0],...e]}function be(e,r,t){return[...e.slice(0,r),...Array.isArray(t)?t:[t||void 0],...e.slice(r)]}var me=e=>Array.isArray(e)?Array(e.length).fill(void 0):void 0;function he(e){if(g(e)){const r={};for(const t in e)r[t]=!0;return[r]}return[!0]}var pe=e=>(Array.isArray(e)?e:[e]).map(he).flat();const ve=(e,r)=>e.map(e=>Object.assign({[r]:le()},e));r.Controller=e=>{var{name:r,rules:t,as:s,render:c,defaultValue:u,control:i,onFocus:a}=e,o=ie(e,["name","rules","as","render","defaultValue","control","onFocus"]);const l=oe(),{defaultValuesRef:f,setValue:d,register:y,unregister:b,trigger:m,mode:h,reValidateMode:{isReValidateOnBlur:v,isReValidateOnChange:j},formStateRef:{current:{isSubmitted:R,touched:F}},updateFormState:V,readFormStateRef:x,fieldsRef:C,fieldArrayNamesRef:S,shallowFieldsStateRef:k}=i||l.control,w=!ee(S.current,r),E=()=>!O(A(k.current,r))&&w?A(k.current,r):O(u)?A(f.current,r):u,[D,B]=n.useState(E()),L=n.useRef(D),P=n.useRef(a),T=e=>!X(Object.assign({isBlurEvent:e,isReValidateOnBlur:v,isReValidateOnChange:j,isSubmitted:R,isTouched:!!A(F,r)},h)),M=n.useCallback(()=>{C.current[r]?C.current[r]=Object.assign({ref:C.current[r].ref},t):(y(Object.defineProperty({name:r,focus:P.current},"value",{set(e){B(e),L.current=e},get:()=>L.current}),t),w&&!A(f.current,r)&&B(E()))},[t,r,y]);n.useEffect(()=>()=>b(r),[b,r]),n.useEffect(()=>{M()},[M]),n.useEffect(()=>{C.current[r]||(M(),w&&B(E()))});const N=()=>{x.current.touched&&!A(F,r)&&(p(F,r,!0),V({touched:F})),T(!0)&&m(r)},$=(...e)=>d(r,(([e])=>{const r=(e=>W(e)||!g(e.target)||g(e.target)&&!e.type?e:O(e.target.value)?e.target.checked:e.target.value)(e);return B(r),L.current=r,r})(e),{shouldValidate:T(),shouldDirty:!0}),_=Object.assign(Object.assign({},o),{onChange:$,onBlur:N,name:r,value:D});return s?n.isValidElement(s)?n.cloneElement(s,_):n.createElement(s,_):c?c({onChange:$,onBlur:N,value:D,name:r}):null},r.FormProvider=e=>{var{children:r}=e,t=ie(e,["children"]);return n.createElement(ae.Provider,{value:Object.assign({},t)},r)},r.appendErrors=G,r.get=A,r.transformToNestObject=v,r.useFieldArray=({control:e,name:r,keyName:t="id"})=>{const s=oe(),c=n.useRef(-1),{updateWatchedValue:u,resetFieldArrayFunctionRef:i,fieldArrayNamesRef:a,fieldsRef:o,defaultValuesRef:l,removeFieldEventListener:f,formStateRef:d,shallowFieldsStateRef:y,updateFormState:g,readFormStateRef:b,validFieldsRef:h,fieldsWithValidationRef:v,fieldArrayDefaultValuesRef:j,validateResolver:R,getValues:F,shouldUnregister:V}=e||s.control,x=Y(r),C=n.useRef([...A(j.current,x)?A(j.current,r,[]):A(V?l.current:y.current,r,[])]),[S,k]=n.useState(ve(C.current,t)),w=n.useRef(S),E=()=>A(F(),r,w.current).map((e,r)=>Object.assign(Object.assign({},w.current[r]),e));w.current=S,a.current.add(r),A(j.current,x)||p(j.current,x,A(l.current,x));const D=e=>{if(k(e),b.current.isValid&&R){const t=F();p(t,r,e),R(t)}},B=e=>(b.current.isDirty||b.current.dirtyFields)&&(O(e)||!_(e.map((e={})=>{var r=t;return e[r],ie(e,["symbol"==typeof r?r:r+""])}),A(l.current,r))),L=()=>{for(const e in o.current)Z(e,r)&&f(o.current[e],!0)},P=e=>!m(A(e,r,[])).length&&T(e,r),M=e=>{const n=A(l.current,r,[]),s=(e,n)=>{for(const s in e)for(const c in e[s])c===t||n[s]&&e[s]&&e[s][c]===n[s][c]||p(d.current.dirtyFields,`${r}[${s}]`,Object.assign(Object.assign({},A(d.current.dirtyFields,`${r}[${s}]`,{})),{[c]:!0}))};e&&(s(n,e),s(e,n))},N=(e,t,n,s=!0,c=!0,u=!1)=>{if(A(y.current,r)){const n=e(A(y.current,r),t.argA,t.argB);c&&p(y.current,r,n)}if(A(j.current,r)){const n=e(A(j.current,r),t.argA,t.argB);c&&p(j.current,r,n),P(j.current)}if(Array.isArray(A(d.current.errors,r))){const n=e(A(d.current.errors,r),t.argA,t.argB);c&&p(d.current.errors,r,n),P(d.current.errors)}if(b.current.touched&&A(d.current.touched,r)){const n=e(A(d.current.touched,r),t.argA,t.argB);c&&p(d.current.touched,r,n),P(d.current.touched)}if(b.current.dirtyFields||b.current.isDirty){const s=e(A(d.current.dirtyFields,r,[]),t.argC,t.argD);c&&p(d.current.dirtyFields,r,s),M(n),P(d.current.dirtyFields)}u&&b.current.isValid&&!R&&(p(h.current,r,e(A(h.current,r,[]),t.argA)),P(h.current),p(v.current,r,e(A(v.current,r,[]),t.argA)),P(v.current)),g({errors:d.current.errors,dirtyFields:d.current.dirtyFields,isDirty:s,touched:d.current.touched})},W=e=>{L(),!e&&T(j.current,r),T(y.current,r),C.current=A(e||l.current,r),k(ve(C.current,t))};return n.useEffect(()=>{const e=A(j.current,r);if(e&&S.length<e.length&&(e.pop(),p(j.current,r,e)),u(r),c.current>-1)for(const e in o.current){const t=o.current[e];if(e.startsWith(`${r}[${c.current}]`)&&t.ref.focus){t.ref.focus();break}}c.current=-1},[S,r]),n.useEffect(()=>{const e=i.current,t=a.current;return Y(r)||(e[r]=W),()=>{L(),delete e[r],t.delete(r)}},[]),{swap:n.useCallback((e,r)=>{const t=E();ye(t,e,r),L(),D([...t]),N(ye,{argA:e,argB:r,argC:e,argD:r},void 0,B(t),!1)},[r]),move:n.useCallback((e,r)=>{const t=E();de(t,e,r),L(),D([...t]),N(de,{argA:e,argB:r,argC:e,argD:r},void 0,B(t),!1)},[r]),prepend:n.useCallback((e,r=!0)=>{const n=me(e),s=ge(E(),ve(Array.isArray(e)?e:[e],t));D(s),L(),N(ge,{argA:n,argC:pe(e)},s),c.current=r?0:-1},[r]),append:n.useCallback((e,n=!0)=>{const s=[...w.current,...ve(Array.isArray(e)?e:[e],t)];D(s),(b.current.dirtyFields||b.current.isDirty)&&(M(s),g({isDirty:!0,dirtyFields:d.current.dirtyFields})),V||(y.current[r]=[...y.current[r]||[],e]),c.current=n?w.current.length:-1},[r]),remove:n.useCallback(e=>{const r=E(),t=fe(r,e);D(t),L(),N(fe,{argA:e,argC:e},t,B(fe(r,e)),!0,!0)},[r]),insert:n.useCallback((e,r,n=!0)=>{const s=me(r),u=E(),i=be(u,e,ve(Array.isArray(r)?r:[r],t));D(i),L(),N(be,{argA:e,argB:s,argC:e,argD:pe(r)},i,B(be(u,e))),c.current=n?e:-1},[r]),fields:S}},r.useForm=function({mode:e=o,reValidateMode:r=a,resolver:t,context:l,defaultValues:f={},shouldFocusError:y=!0,shouldUnregister:h=!0,criteriaMode:R}={}){const F=n.useRef({}),k=n.useRef({}),w=n.useRef(new Set),E=n.useRef({}),P=n.useRef({}),H=n.useRef({}),U=n.useRef({}),q=n.useRef(f),z=n.useRef({}),G=n.useRef(!1),Z=n.useRef(!1),ie=n.useRef(),ae=n.useRef(h?{}:re(f)),oe=n.useRef({}),le=n.useRef(l),fe=n.useRef(t),de=n.useRef(new Set),ye=n.useRef(te(e)),{isOnSubmit:ge,isOnTouch:be}=ye.current,me="all"===R,[he,pe]=n.useState({isDirty:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touched:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!ge,errors:{}}),ve=n.useRef({isDirty:!ue,dirtyFields:!ue,touched:!ue||be,isSubmitting:!ue,isValid:!ue}),Oe=n.useRef(he),Ae=n.useRef(),{isOnBlur:je,isOnChange:Re}=n.useRef(te(r)).current;le.current=l,fe.current=t,Oe.current=he;const Fe=n.useCallback((e={})=>!G.current&&pe(Object.assign(Object.assign({},Oe.current),e)),[]),Ve=n.useCallback((e,r,t=!1,n={},s)=>{let c=t||function({errors:e,name:r,error:t,validFields:n,fieldsWithValidation:s}){const c=O(t),u=A(e,r);return c&&!!u||!c&&!_(u,t,!0)||c&&A(s,r)&&!A(n,r)}({errors:Oe.current.errors,error:r,name:e,validFields:U.current,fieldsWithValidation:H.current});const u=A(Oe.current.errors,e);r?(T(U.current,e),c=c||!u||!_(u,r,!0),p(Oe.current.errors,e,r)):((A(H.current,e)||fe.current)&&(p(U.current,e,!0),c=c||u),T(Oe.current.errors,e)),(c&&!d(t)||!L(n))&&Fe(Object.assign(Object.assign(Object.assign({},n),{errors:Oe.current.errors}),fe.current?{isValid:!!s}:{}))},[]),xe=n.useCallback((e,r)=>{const{ref:t,options:n}=F.current[e],c=ce&&s(t)&&d(r)?"":r;V(t)&&n?n.forEach(({ref:e})=>e.checked=e.value===c):x(t)&&!N(c)?t.files=c:S(t)?[...t.options].forEach(e=>e.selected=c.includes(e.value)):C(t)&&n?n.length>1?n.forEach(({ref:e})=>e.checked=Array.isArray(c)?!!c.find(r=>r===e.value):c===e.value):n[0].ref.checked=!!c:t.value=c},[]),Ce=()=>!_(Me(),L(q.current)?z.current:q.current),Se=n.useCallback((e,r=!0)=>{if(ve.current.isDirty||ve.current.dirtyFields){const t=A(z.current,e)!==D(F,e,ae),n=A(Oe.current.dirtyFields,e),s=Oe.current.isDirty;t?p(Oe.current.dirtyFields,e,!0):T(Oe.current.dirtyFields,e);const c={isDirty:Ce(),dirtyFields:Oe.current.dirtyFields},u=ve.current.isDirty&&s!==c.isDirty||ve.current.dirtyFields&&n!==A(Oe.current.dirtyFields,e);return u&&r&&(Oe.current=Object.assign(Object.assign({},Oe.current),c),Fe(Object.assign({},c))),u?c:{}}return{}},[]),ke=n.useCallback(async(e,r)=>{if(F.current[e]){const t=(await J(F,me,F.current[e],ae))[e];return Ve(e,t,r),O(t)}return!1},[Ve,me]),we=n.useCallback(async e=>{const{errors:r}=await fe.current(Me(),le.current,me),t=Oe.current.isValid;if(Array.isArray(e)){const t=e.map(e=>{const t=A(r,e);return t?p(Oe.current.errors,e,t):T(Oe.current.errors,e),!t}).every(Boolean);return Fe({isValid:L(r),errors:Oe.current.errors}),t}{const n=A(r,e);return Ve(e,n,t!==L(r),{},L(r)),!n}},[Ve,me]),Ee=n.useCallback(async e=>{const r=e||Object.keys(F.current);if(fe.current)return we(r);if(Array.isArray(r)){const e=await Promise.all(r.map(async e=>await ke(e,null)));return Fe(),e.every(Boolean)}return await ke(r,ve.current.isValid)},[we,ke]),De=n.useCallback((e,r,{shouldDirty:t,shouldValidate:n})=>{const s={};p(s,e,r);for(const c of K(e,r))F.current[c]&&(xe(c,A(s,c)),t&&Se(c),n&&Ee(c))},[Ee,xe,Se]),Be=n.useCallback((e,r,t={})=>{F.current[e]?(xe(e,r),t.shouldDirty&&Se(e)):W(r)||(De(e,r,t),de.current.has(e)&&(k.current[e]=r,oe.current[e]({[e]:r}),(ve.current.isDirty||ve.current.dirtyFields)&&t.shouldDirty&&(p(Oe.current.dirtyFields,e,function e(r,t,n,s,c){let u=-1;for(;++u<r.length;){for(const s in r[u])Array.isArray(r[u][s])?(!n[u]&&(n[u]={}),n[u][s]=[],e(r[u][s],A(t[u]||{},s,[]),n[u][s],n[u],s)):A(t[u]||{},s)===r[u][s]?p(n[u]||{},s):n[u]=Object.assign(Object.assign({},n[u]),{[s]:!0});!n.length&&s&&delete s[c]}return n.length?n:void 0}(r,A(q.current,e,[]),A(Oe.current.dirtyFields,e,[]))),Fe({isDirty:!_(Object.assign(Object.assign({},Me()),{[e]:r}),q.current),dirtyFields:Oe.current.dirtyFields})))),!h&&p(ae.current,e,r)},[Se,xe,De]),Le=e=>Z.current||w.current.has(e)||w.current.has((e.match(/\w+/)||[])[0]),Pe=(e,r=!0)=>{if(!L(E.current))for(const t in E.current)e&&E.current[t].size&&!E.current[t].has(e)&&!E.current[t].has(Y(e))||(P.current[t](),r=!1);return r};function Te(e){if(!h){let r=re(e);for(const e of de.current)b(e)&&!r[e]&&(r=Object.assign(Object.assign({},r),{[e]:[]}));return r}return e}function Me(e){if(N(e))return D(F,e,ae);if(Array.isArray(e)){const r={};for(const t of e)p(r,t,D(F,t,ae));return r}return Te($(F,ae))}ie.current=ie.current?ie.current:async({type:e,target:r})=>{const t=r.name,n=F.current[t];let s,u;if(n){const r=e===c,i=X(Object.assign({isBlurEvent:r,isReValidateOnChange:Re,isReValidateOnBlur:je,isTouched:!!A(Oe.current.touched,t),isSubmitted:Oe.current.isSubmitted},ye.current));let a=Se(t,!1),o=!L(a)||Le(t);if(r&&!A(Oe.current.touched,t)&&ve.current.touched&&(p(Oe.current.touched,t,!0),a=Object.assign(Object.assign({},a),{touched:Oe.current.touched})),i)return Pe(t),(!L(a)||o&&L(a))&&Fe(a);if(fe.current){const{errors:e}=await fe.current(Me(),le.current,me),r=Oe.current.isValid;s=A(e,t),u=L(e),r!==u&&(o=!0)}else s=(await J(F,me,n,ae))[t];Pe(t),Ve(t,s,o,a,u)}};const Ne=n.useCallback(async(e={})=>{const{errors:r}=await fe.current(Object.assign(Object.assign(Object.assign({},q.current),Me()),e),le.current,me),t=L(r);Oe.current.isValid!==t&&Fe({isValid:t})},[me]),We=n.useCallback((e,r)=>function(e,r,t,n,s,c){const{ref:u,ref:{name:i,type:a}}=t,o=e.current[i];if(!s){const r=D(e,i,n);O(r)||p(n.current,i,r)}if(a)if((V(u)||C(u))&&o){const{options:t}=o;Array.isArray(t)&&t.length?(m(t).forEach((e,n)=>{const{ref:s}=e;(s&&B(s)&&M(e,s)||c)&&(j(s,r),T(t,`[${n}]`))}),t&&!m(t).length&&delete e.current[i]):delete e.current[i]}else(B(u)&&M(o,u)||c)&&(j(u,r),delete e.current[i]);else delete e.current[i]}(F,ie.current,e,ae,h,r),[h]),$e=e=>{if(Z.current)Fe();else if(w){let r=!0;for(const t of w.current)if(t.startsWith(e)){Fe(),r=!1;break}r&&Pe(e)}},_e=n.useCallback((e,r)=>{e&&(We(e,r),h&&!m(e.options||[]).length&&(T(z.current,e.ref.name),T(U.current,e.ref.name),T(H.current,e.ref.name),T(Oe.current.errors,e.ref.name),p(Oe.current.dirtyFields,e.ref.name,!0),Fe({errors:Oe.current.errors,isDirty:Ce(),dirtyFields:Oe.current.dirtyFields}),fe.current&&Ne(),$e(e.ref.name)))},[Ne,We]),He=n.useCallback((e,r,t)=>{const n=t?E.current[t]:w.current,s=O(r)?q.current:r,c=$(F,ae,!1,e);return N(e)?Q(c,e,n,O(r)?A(s,e):r,!0):Array.isArray(e)?e.reduce((e,r)=>Object.assign(Object.assign({},e),{[r]:Q(c,r,n,s)}),{}):(Z.current=O(t),v(!L(c)&&c||s))},[]);function Ue(e,r={}){const{name:t,type:n,value:a}=e,o=Object.assign({ref:e},r),l=F.current,f=ne(e),d=ee(de.current,t),y=r=>ce&&(!s(e)||r===e);let b,h=l[t],v=!0;if(h&&(f?Array.isArray(h.options)&&m(h.options).find(e=>a===e.ref.value&&y(e.ref)):y(h.ref)))return void(l[t]=Object.assign(Object.assign({},h),r));h=n?f?Object.assign({options:[...m(h&&h.options||[]),{ref:e}],ref:{type:n,name:t}},r):Object.assign({},o):o,l[t]=h;const j=O(A(ae.current,t));if(L(q.current)&&j||(b=A(j?q.current:ae.current,t),v=O(b),v||d||xe(t,b)),L(r)||(p(H.current,t,!0),!ge&&ve.current.isValid&&J(F,me,h,ae).then(e=>{const r=Oe.current.isValid;L(e)?p(U.current,t,!0):T(U.current,t),r!==L(e)&&Fe()})),!(z.current[t]||d&&v)){const e=D(F,t,ae);p(z.current,t,v?g(e)?Object.assign({},e):e:b),!d&&T(Oe.current.dirtyFields,t)}n&&function({ref:e},r,t){s(e)&&t&&(e.addEventListener(r?u:i,t),e.addEventListener(c,t))}(f&&h.options?h.options[h.options.length-1]:h,f||"select-one"===e.type,ie.current)}const Ie=n.useCallback((e,r)=>async t=>{t&&t.preventDefault&&(t.preventDefault(),t.persist());let n={},s=Te($(F,ae,!0));ve.current.isSubmitting&&Fe({isSubmitting:!0});try{if(fe.current){const{errors:e,values:r}=await fe.current(s,le.current,me);Oe.current.errors=n=e,s=r}else for(const e of Object.values(F.current))if(e){const{ref:{name:r}}=e,t=await J(F,me,e,ae);t[r]?(p(n,r,t[r]),T(U.current,r)):A(H.current,r)&&(T(Oe.current.errors,r),p(U.current,r,!0))}L(n)&&Object.keys(Oe.current.errors).every(e=>e in F.current)?(Fe({errors:{},isSubmitting:!0}),await e(s,t)):(Oe.current.errors=Object.assign(Object.assign({},Oe.current.errors),n),r&&await r(n,t),y&&((e,r)=>{for(const t in e)if(A(r,t)){const r=e[t];if(r){if(r.ref.focus){r.ref.focus();break}if(r.options){r.options[0].ref.focus();break}}}})(F.current,n))}finally{Fe({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:L(Oe.current.errors),errors:Oe.current.errors,submitCount:Oe.current.submitCount+1})}},[y,me]);n.useEffect(()=>(G.current=!1,t&&ve.current.isValid&&Ne(),Ae.current=Ae.current||!ce?Ae.current:function(e,r){const t=new MutationObserver(()=>{for(const t of Object.values(e.current))if(t&&t.options)for(const e of t.options)e&&e.ref&&B(e.ref)&&r(t);else t&&B(t.ref)&&r(t)});return t.observe(window.document,{childList:!0,subtree:!0}),t}(F,_e),()=>{G.current=!0,Ae.current&&Ae.current.disconnect(),ae.current={},Object.values(F.current).forEach(e=>_e(e,!0))}),[_e]),!t&&ve.current.isValid&&(he.isValid=_(U.current,H.current)&&L(Oe.current.errors));const qe={trigger:Ee,setValue:n.useCallback((function(e,r,t){Be(e,r,t),Le(e)&&Fe(),Pe(e),(t||{}).shouldValidate&&Ee(e)}),[Be,Ee]),getValues:n.useCallback(Me,[]),register:n.useCallback((function(e,r){if(!se)if(N(e))Ue({name:e},r);else{if(!g(e)||!("name"in e))return r=>r&&Ue(r,e);Ue(e,r)}}),[q.current]),unregister:n.useCallback((function(e){for(const r of Array.isArray(e)?e:[e])_e(F.current[r],!0)}),[])},ze=Object.assign({updateWatchedValue:$e,shouldUnregister:h,removeFieldEventListener:We,watchInternal:He,mode:ye.current,reValidateMode:{isReValidateOnBlur:je,isReValidateOnChange:Re},fieldsRef:F,resetFieldArrayFunctionRef:oe,useWatchFieldsRef:E,useWatchRenderFunctionsRef:P,fieldArrayDefaultValuesRef:k,validFieldsRef:U,fieldsWithValidationRef:H,fieldArrayNamesRef:de,readFormStateRef:ve,formStateRef:Oe,defaultValuesRef:q,shallowFieldsStateRef:ae,updateFormState:Fe,validateResolver:t?Ne:void 0},qe);return Object.assign({watch:function(e,r){return He(e,r)},control:ze,formState:ue?new Proxy(he,{get:(e,r)=>{if(r in e)return ve.current[r]=!0,e[r]}}):he,handleSubmit:Ie,reset:n.useCallback((e,r={})=>{if(ce)for(const r of Object.values(F.current))if(r){const{ref:t,options:n}=r,c=ne(t)&&Array.isArray(n)?n[0].ref:t;if(s(c))try{c.closest("form").reset();break}catch(e){}}F.current={},q.current=re(e||q.current),e&&Pe(""),Object.values(oe.current).forEach(e=>I(e)&&e()),ae.current=h?{}:re(e)||{},(({errors:e,isDirty:r,isSubmitted:t,touched:n,isValid:s,submitCount:c,dirtyFields:u})=>{s||(U.current={},H.current={}),z.current={},k.current={},w.current=new Set,Z.current=!1,Fe({submitCount:c?Oe.current.submitCount:0,isDirty:!!r&&Oe.current.isDirty,isSubmitted:!!t&&Oe.current.isSubmitted,isValid:!!s&&Oe.current.isValid,dirtyFields:u?Oe.current.dirtyFields:{},touched:n?Oe.current.touched:{},errors:e?Oe.current.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})})(r)},[]),clearErrors:n.useCallback((function(e){e&&(Array.isArray(e)?e:[e]).forEach(e=>F.current[e]?b(e)?delete Oe.current.errors[e]:p(Oe.current.errors,e,void 0):T(Oe.current.errors,e)),Fe({errors:e?Oe.current.errors:{}})}),[]),setError:n.useCallback((function(e,r){const t=(F.current[e]||{}).ref;p(Oe.current.errors,e,Object.assign(Object.assign({},r),{ref:t})),Fe({isValid:!1,errors:Oe.current.errors}),r.shouldFocus&&t&&t.focus&&t.focus()}),[]),errors:he.errors},qe)},r.useFormContext=oe,r.useWatch=function({control:e,name:r,defaultValue:t}){const s=oe(),{useWatchFieldsRef:c,useWatchRenderFunctionsRef:u,watchInternal:i,defaultValuesRef:a}=e||s.control,[o,l]=n.useState(O(t)?N(r)?A(a.current,r):Array.isArray(r)?r.reduce((e,r)=>Object.assign(Object.assign({},e),{[r]:A(a.current,r)}),{}):a.current:t),f=n.useRef(),d=n.useRef(t),y=n.useCallback(()=>{const e=i(r,d.current,f.current);l(g(e)?Object.assign({},e):Array.isArray(e)?[...e]:e)},[l,i,d,r,f]);return n.useEffect(()=>{const e=f.current=le(),t=u.current,n=c.current;return n[e]=new Set,t[e]=y,i(r,d.current,e),()=>{delete n[e],delete t[e]}},[r,y,u,c,i,d]),O(o)?t:o}},function(e,r){e.exports=React}])}));
//# sourceMappingURL=ReactHookForm.min.js.map