!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.ReactHookForm=r():e.ReactHookForm=r()}(this,(function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var s=r[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var s in e)t.d(n,s,function(r){return e[r]}.bind(null,s));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";e.exports=t(1)},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(2),s=e=>e instanceof HTMLElement;const c="blur",u="change",i="input",a="onChange",o="onSubmit",l="pattern",f="required";var d=e=>null==e,g=e=>Array.isArray(e);const b=e=>"object"==typeof e;var m=e=>!d(e)&&!g(e)&&b(e)&&!(e instanceof Date),y=e=>!g(e)&&(/^\w*$/.test(e)||!/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/.test(e)),h=e=>{const r=[];return e.replace(/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,(e,t,n,s)=>{r.push(n?s.replace(/\\(\\)?/g,"$1"):t||e)}),r};function p(e,r,t){let n=-1;const s=y(r)?[r]:h(r),c=s.length,u=c-1;for(;++n<c;){const r=s[n];let c=t;if(n!==u){const t=e[r];c=m(t)||g(t)?t:isNaN(+s[n+1])?{}:[]}e[r]=c,e=e[r]}return e}var v=e=>Object.entries(e).reduce((e,[r,t])=>y(r)?Object.assign(Object.assign({},e),{[r]:t}):(p(e,r,t),e),{}),O=e=>void 0===e,j=e=>e.filter(Boolean),R=(e,r,t)=>{const n=j(r.split(/[,[\].]+?/)).reduce((e,r)=>d(e)?e:e[r],e);return O(n)||n===e?O(e[r])?t:e[r]:n},F=(e,r)=>{s(e)&&e.removeEventListener&&(e.removeEventListener(i,r),e.removeEventListener(u,r),e.removeEventListener(c,r))};const V={isValid:!1,value:""};var x=e=>g(e)?e.reduce((e,r)=>r&&r.ref.checked?{isValid:!0,value:r.ref.value}:e,V):V,C=e=>"radio"===e.type,S=e=>"file"===e.type,k=e=>"checkbox"===e.type,w=e=>"select-multiple"===e.type;const E={value:!1,isValid:!1},D={value:!0,isValid:!0};var A=e=>{if(g(e)){if(e.length>1){const r=e.filter(e=>e&&e.ref.checked).map(({ref:{value:e}})=>e);return{value:r,isValid:!!r.length}}const{checked:r,value:t,attributes:n}=e[0].ref;return r?n&&!O(n.value)?O(t)||""===t?D:{value:t,isValid:!0}:D:E}return E};function B(e,r,t,n){const s=e.current[r];if(s){const{ref:{value:e,disabled:r},ref:t}=s;if(r&&n)return;return S(t)?t.files:C(t)?x(s.options).value:w(t)?(c=t.options,[...c].filter(({selected:e})=>e).map(({value:e})=>e)):k(t)?A(s.options).value:e}var c;if(t)return R(t.current,r)}function W(e){return!e||e instanceof HTMLElement&&e.nodeType!==Node.DOCUMENT_NODE&&W(e.parentNode)}var L=e=>m(e)&&!Object.keys(e).length,P=e=>"boolean"==typeof e;function M(e,r){const t=y(r)?[r]:h(r),n=1==t.length?e:function(e,r){const t=r.slice(0,-1).length;let n=0;for(;n<t;)e=O(e)?n++:e[r[n++]];return e}(e,t),s=t[t.length-1];let c=void 0;n&&delete n[s];for(let r=0;r<t.slice(0,-1).length;r++){let n=-1,s=void 0;const u=t.slice(0,-(r+1)),i=u.length-1;for(r>0&&(c=e);++n<u.length;){const r=u[n];s=s?s[r]:e[r],i===n&&(m(s)&&L(s)||g(s)&&!s.filter(e=>m(e)&&!L(e)||P(e)).length)&&(c?delete c[r]:delete e[r]),c=s}}return e}const N=(e,r)=>e&&e.ref===r;var T=e=>"string"==typeof e,$=e=>d(e)||!b(e),_=(e,r,t,n)=>{const s={};for(const r in e.current)(O(n)||(T(n)?r.startsWith(n):g(n)&&n.find(e=>r.startsWith(e))))&&(s[r]=B(e,r,void 0,t));return function e(r,t){if($(r)||$(t))return t;for(const n in t){const s=r[n],c=t[n];try{m(s)&&m(c)||g(s)&&g(c)?r[n]=e(s,c):r[n]=c}catch(e){}}return r}(v(Object.assign({},(r||{}).current||{})),v(s))};function H(e=[],r=[],t){const n=Object.keys(e),s=Object.keys(r);if(n.length!==s.length)return!1;for(const s of n)if(!t||!["ref","context"].includes(s)){const n=e[s],c=r[s];if((m(n)||g(n))&&(m(c)||g(c))?!H(n,c,t):n!==c)return!1}return!0}var I=e=>e instanceof RegExp,U=e=>{return m(r=e)&&!I(r)?e:{value:e,message:""};var r},q=e=>"function"==typeof e,z=e=>T(e)||m(e)&&n.isValidElement(e);function G(e,r,t="validate"){if(z(e)||P(e)&&!e)return{type:t,message:z(e)?e:"",ref:r}}var J=(e,r,t,n,s)=>{if(r){const r=t[e];return Object.assign(Object.assign({},r),{types:Object.assign(Object.assign({},r&&r.types?r.types:{}),{[n]:s||!0})})}return{}},K=async(e,r,{ref:t,ref:{type:n,value:s},options:c,required:u,maxLength:i,minLength:a,min:o,max:g,pattern:b,validate:y},h)=>{const p=e.current,v=t.name,O={},j=C(t),R=k(t),F=j||R,V=""===s,S=J.bind(null,v,r,O),w=(e,r,n,s="maxLength",c="minLength")=>{const u=e?r:n;O[v]=Object.assign({type:e?s:c,message:u,ref:t},S(e?s:c,u))};if(u&&(!j&&!R&&(V||d(s))||P(s)&&!s||R&&!A(c).isValid||j&&!x(c).isValid)){const{value:e,message:n}=z(u)?{value:!!u,message:u}:U(u);if(e&&(O[v]=Object.assign({type:f,message:n,ref:F?((p[v].options||[])[0]||{}).ref:t},S(f,n)),!r))return O}if(!d(o)||!d(g)){let e,c;const{value:u,message:i}=U(g),{value:a,message:l}=U(o);if("number"===n||!n&&!isNaN(s)){const r=t.valueAsNumber||parseFloat(s);d(u)||(e=r>u),d(a)||(c=r<a)}else{const r=t.valueAsDate||new Date(s);T(u)&&(e=r>new Date(u)),T(a)&&(c=r<new Date(a))}if((e||c)&&(w(!!e,i,l,"max","min"),!r))return O}if(T(s)&&!V&&(i||a)){const{value:e,message:t}=U(i),{value:n,message:c}=U(a),u=s.toString().length,o=!d(e)&&u>e,l=!d(n)&&u<n;if((o||l)&&(w(!!o,t,c),!r))return O}if(b&&!V){const{value:e,message:n}=U(b);if(I(e)&&!e.test(s)&&(O[v]=Object.assign({type:l,message:n,ref:t},S(l,n)),!r))return O}if(y){const n=B(e,v,h),s=F&&c?c[0].ref:t;if(q(y)){const e=G(await y(n),s);if(e&&(O[v]=Object.assign(Object.assign({},e),S("validate",e.message)),!r))return O}else if(m(y)){let e={};for(const[t,c]of Object.entries(y)){if(!L(e)&&!r)break;const u=G(await c(n),s,t);u&&(e=Object.assign(Object.assign({},u),S(t,u.message)),r&&(O[v]=e))}if(!L(e)&&(O[v]=Object.assign({ref:s},e),!r))return O}}return O};const Q=(e,r)=>Object.entries(r).map(([t,n])=>((r,t,n)=>{const s=n?`${e}.${r}`:`${e}[${r}]`;return $(t)?s:Q(s,t)})(t,n,m(r))).flat(1/0);var X=(e,r,t,n,s)=>{let c;return t.add(r),L(e)?c=void 0:(c=R(e,r),(m(c)||g(c))&&Q(r,c).forEach(e=>t.add(e))),O(c)?s?n:R(n,r):c},Y=({isOnBlur:e,isOnChange:r,isOnTouch:t,isTouched:n,isReValidateOnBlur:s,isReValidateOnChange:c,isBlurEvent:u,isSubmitted:i,isOnAll:a})=>!a&&(!i&&t?!(n||u):(i?s:e)?!u:!(i?c:r)||u),Z=e=>e.substring(0,e.indexOf("["));const ee=(e,r)=>RegExp(`^${r}[\\d+]`.replace(/\[/g,"\\[").replace(/\]/g,"\\]")).test(e);var re=(e,r)=>[...e].some(e=>ee(r,e)),te=e=>({isOnSubmit:!e||e===o,isOnBlur:"onBlur"===e,isOnChange:e===a,isOnAll:"all"===e,isOnTouch:"onTouched"===e}),ne=e=>C(e)||k(e);const se="undefined"==typeof window,ce="undefined"!=typeof document&&!se&&!O(window.HTMLElement),ue=ce?"Proxy"in window:"undefined"!=typeof Proxy;function ie(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)r.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(t[n[s]]=e[n[s]])}return t}const ae=n.createContext(null);ae.displayName="RHFContext";const oe=()=>n.useContext(ae);var le=()=>{const e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(r){const t=(16*Math.random()+e)%16|0;return("x"==r?t:3&t|8).toString(16)}))},fe=(e,r)=>O(r)?[]:g(r)?function(e,r){let t=-1;for(;++t<e.length;)r.indexOf(t)>=0&&delete e[t];return j(e)}(e,r):((e,r)=>[...e.slice(0,r),...e.slice(r+1)])(e,r),de=(e,r,t)=>g(e)?(O(e[t])&&(e[t]=void 0),e.splice(t,0,e.splice(r,1)[0]),e):[],ge=(e,r,t)=>{const n=[e[t],e[r]];e[r]=n[0],e[t]=n[1]};function be(e,r){return[...g(r)?r:[r||void 0],...e]}function me(e,r,t){return[...e.slice(0,r),...g(t)?t:[t||void 0],...e.slice(r)]}var ye=e=>g(e)?Array(e.length).fill(void 0):void 0;function he(e){if(m(e)){const r={};for(const t in e)r[t]=!0;return[r]}return[!0]}var pe=e=>(g(e)?e:[e]).map(he).flat();const ve=(e,r)=>Object.assign({[r]:le()},e),Oe=(e,r)=>(g(e)?e:[]).map(e=>ve(e,r));r.Controller=e=>{var{name:r,rules:t,as:s,render:c,defaultValue:u,control:i,onFocus:a}=e,o=ie(e,["name","rules","as","render","defaultValue","control","onFocus"]);const l=oe(),{defaultValuesRef:f,setValue:d,register:g,unregister:b,trigger:y,mode:h,reValidateMode:{isReValidateOnBlur:v,isReValidateOnChange:j},formStateRef:{current:{isSubmitted:F,touched:V}},updateFormState:x,readFormStateRef:C,fieldsRef:S,fieldArrayNamesRef:k,shallowFieldsStateRef:w}=i||l.control,E=!re(k.current,r),D=()=>!O(R(w.current,r))&&E?R(w.current,r):O(u)?R(f.current,r):u,[A,B]=n.useState(D()),W=n.useRef(A),L=n.useRef(a),P=e=>!Y(Object.assign({isBlurEvent:e,isReValidateOnBlur:v,isReValidateOnChange:j,isSubmitted:F,isTouched:!!R(V,r)},h)),M=n.useCallback(()=>{S.current[r]?S.current[r]=Object.assign({ref:S.current[r].ref},t):(g(Object.defineProperty({name:r,focus:L.current},"value",{set(e){B(e),W.current=e},get:()=>W.current}),t),E&&!R(f.current,r)&&B(D()))},[t,r,g]);n.useEffect(()=>()=>{!re(k.current,r)&&b(r)},[b,r,k]),n.useEffect(()=>{M()},[M]),n.useEffect(()=>{S.current[r]||(M(),E&&B(D()))});const N=()=>{C.current.touched&&!R(V,r)&&(p(V,r,!0),x({touched:V})),P(!0)&&y(r)},T=(...e)=>d(r,(([e])=>{const r=(e=>$(e)||!m(e.target)||m(e.target)&&!e.type?e:O(e.target.value)?e.target.checked:e.target.value)(e);return B(r),W.current=r,r})(e),{shouldValidate:P(),shouldDirty:!0}),_=Object.assign(Object.assign({},o),{onChange:T,onBlur:N,name:r,value:A});return s?n.isValidElement(s)?n.cloneElement(s,_):n.createElement(s,_):c?c({onChange:T,onBlur:N,value:A,name:r}):null},r.FormProvider=e=>{var{children:r}=e,t=ie(e,["children"]);return n.createElement(ae.Provider,{value:Object.assign({},t)},r)},r.appendErrors=J,r.get=R,r.transformToNestObject=v,r.useFieldArray=({control:e,name:r,keyName:t="id"})=>{const s=oe(),c=n.useRef(-1),{isWatchAllRef:u,resetFieldArrayFunctionRef:i,fieldArrayNamesRef:a,fieldsRef:o,defaultValuesRef:l,removeFieldEventListener:f,formStateRef:d,formStateRef:{current:{dirtyFields:b,touched:m}},shallowFieldsStateRef:y,updateFormState:h,readFormStateRef:v,watchFieldsRef:F,validFieldsRef:V,fieldsWithValidationRef:x,fieldArrayDefaultValuesRef:C,validateResolver:S,renderWatchedInputs:k,getValues:w,shouldUnregister:E}=e||s.control,D=Z(r),A=n.useRef([...R(C.current,D)?R(C.current,r,[]):R(E?l.current:y.current,r,[])]),[B,W]=n.useState(Oe(A.current,t)),L=n.useRef(B),P=()=>R(w()||{},r,L.current).map((e,r)=>Object.assign(Object.assign({},L.current[r]),e));L.current=B,a.current.add(r),R(C.current,D)||p(C.current,D,R(l.current,D));const N=e=>e.map(e=>ve(e,t)),T=e=>{if(W(e),v.current.isValid&&S){const t=w();p(t,r,e),S(t)}},$=e=>(v.current.isDirty||v.current.dirtyFields)&&(O(e)||!H(e.map((e={})=>{var r=t;return e[r],ie(e,["symbol"==typeof r?r:r+""])}),R(l.current,r))),_=()=>{for(const e in o.current)ee(e,r)&&o.current[e]&&f(o.current[e],!0)},I=e=>!j(R(e,r,[])).length&&M(e,r),U=(e,t,n=!0,s=!0,c=!1)=>{if(R(y.current,r)){const n=e(R(y.current,r),t.argA,t.argB);s&&p(y.current,r,n)}if(R(C.current,r)){const n=e(R(C.current,r),t.argA,t.argB);s&&p(C.current,r,n),I(C.current)}if(g(R(d.current.errors,r))){const n=e(R(d.current.errors,r),t.argA,t.argB);s&&p(d.current.errors,r,n),I(d.current.errors)}if(v.current.touched&&R(m,r)){const n=e(R(m,r),t.argA,t.argB);s&&p(m,r,n),I(m)}if(v.current.dirtyFields||v.current.isDirty){const n=e(R(b,r,[]),t.argC,t.argD);s&&p(b,r,n),I(b)}c&&v.current.isValid&&!S&&(p(V.current,r,e(R(V.current,r,[]),t.argA)),I(V.current),p(x.current,r,e(R(x.current,r,[]),t.argA)),I(x.current)),h({errors:d.current.errors,dirtyFields:b,isDirty:n,touched:m})},q=e=>{_(),!e&&M(C.current,r),M(y.current,r),A.current=R(e||l.current,r),W(Oe(A.current,t))};return n.useEffect(()=>{const e=R(C.current,r);if(e&&B.length<e.length&&(e.pop(),p(C.current,r,e)),u.current)h();else if(F){let e=!0;for(const t of F.current)if(t.startsWith(r)){h(),e=!1;break}e&&k(r)}if(c.current>-1)for(const e in o.current){const t=o.current[e];if(e.startsWith(`${r}[${c.current}]`)&&t.ref.focus){t.ref.focus();break}}c.current=-1},[B,r]),n.useEffect(()=>{const e=i.current,t=a.current;return Z(r)||(e[r]=q),()=>{_(),delete e[r],t.delete(r)}},[]),{swap:n.useCallback((e,r)=>{const t=P();ge(t,e,r),_(),T([...t]),U(ge,{argA:e,argB:r,argC:e,argD:r},$(t),!1)},[r]),move:n.useCallback((e,r)=>{const t=P();de(t,e,r),_(),T([...t]),U(de,{argA:e,argB:r,argC:e,argD:r},$(t),!1)},[r]),prepend:n.useCallback((e,r=!0)=>{const n=ye(e);T(be(P(),g(e)?N(e):[ve(e,t)])),_(),U(be,{argA:n,argC:pe(e)}),c.current=r?0:-1},[r]),append:n.useCallback((e,n=!0)=>{if(T([...L.current,...g(e)?N(e):[ve(e,t)]]),v.current.dirtyFields||v.current.isDirty){const t=R(b,r,[]);p(b,r,[...L.current.length>t.length?(ye(L.current)||[]).map((e,r)=>t[r]):t,...pe(e)]),h({isDirty:!0,dirtyFields:b})}E||(y.current[r]=[...y.current[r]||[],e]),c.current=n?L.current.length:-1},[r]),remove:n.useCallback(e=>{const r=P();T(fe(r,e)),_(),U(fe,{argA:e,argC:e},$(fe(r,e)),!0,!0)},[r]),insert:n.useCallback((e,r,n=!0)=>{const s=ye(r),u=P();T(me(u,e,g(r)?N(r):[ve(r,t)])),_(),U(me,{argA:e,argB:s,argC:e,argD:pe(r)},$(me(u,e))),c.current=n?e:-1},[r]),fields:B}},r.useForm=function({mode:e=o,reValidateMode:r=a,resolver:t,context:l,defaultValues:f={},shouldFocusError:b=!0,shouldUnregister:h=!0,criteriaMode:V}={}){const x=n.useRef({}),E=n.useRef({}),D=n.useRef(new Set),A=n.useRef({}),P=n.useRef({}),I=n.useRef({}),U=n.useRef({}),z=n.useRef(f),G=n.useRef({}),J=n.useRef(!1),ee=n.useRef(!1),ie=n.useRef(),ae=n.useRef(h?{}:Object.assign({},f)),oe=n.useRef({}),le=n.useRef(l),fe=n.useRef(t),de=n.useRef(new Set),ge=n.useRef(te(e)),{isOnSubmit:be,isOnTouch:me}=ge.current,ye="all"===V,[he,pe]=n.useState({isDirty:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touched:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!be,errors:{}}),ve=n.useRef({isDirty:!ue,dirtyFields:!ue,touched:!ue||me,isSubmitting:!ue,isValid:!ue}),Oe=n.useRef(he),je=n.useRef(),{isOnBlur:Re,isOnChange:Fe}=n.useRef(te(r)).current;le.current=l,fe.current=t,Oe.current=he;const Ve=n.useCallback((e={})=>!J.current&&pe(Object.assign(Object.assign({},Oe.current),e)),[]),xe=n.useCallback((e,r,t=!1,n={},s)=>{let c=t||function({errors:e,name:r,error:t,validFields:n,fieldsWithValidation:s}){const c=O(t),u=R(e,r);return c&&!!u||!c&&!H(u,t,!0)||c&&R(s,r)&&!R(n,r)}({errors:Oe.current.errors,error:r,name:e,validFields:U.current,fieldsWithValidation:I.current});const u=R(Oe.current.errors,e);r?(M(U.current,e),c=c||!u||!H(u,r,!0),p(Oe.current.errors,e,r)):((R(I.current,e)||fe.current)&&(p(U.current,e,!0),c=c||u),M(Oe.current.errors,e)),(c&&!d(t)||!L(n))&&Ve(Object.assign(Object.assign(Object.assign({},n),{errors:Oe.current.errors}),fe.current?{isValid:!!s}:{}))},[]),Ce=n.useCallback((e,r)=>{const{ref:t,options:n}=x.current[e],c=ce&&s(t)&&d(r)?"":r;C(t)&&n?n.forEach(({ref:e})=>e.checked=e.value===c):S(t)&&!T(c)?t.files=c:w(t)?[...t.options].forEach(e=>e.selected=c.includes(e.value)):k(t)&&n?n.length>1?n.forEach(({ref:e})=>e.checked=g(c)?!!c.find(r=>r===e.value):c===e.value):n[0].ref.checked=!!c:t.value=c},[]),Se=()=>!H(Me(),L(z.current)?G.current:z.current)||!L(Oe.current.dirtyFields),ke=n.useCallback((e,r=!0)=>{if(ve.current.isDirty||ve.current.dirtyFields){const t=R(G.current,e)!==B(x,e,ae),n=R(Oe.current.dirtyFields,e),s=Oe.current.isDirty;t?p(Oe.current.dirtyFields,e,!0):M(Oe.current.dirtyFields,e);const c={isDirty:Se(),dirtyFields:Oe.current.dirtyFields},u=ve.current.isDirty&&s!==c.isDirty||ve.current.dirtyFields&&n!==R(Oe.current.dirtyFields,e);return u&&r&&(Oe.current=Object.assign(Object.assign({},Oe.current),c),Ve(Object.assign({},c))),u?c:{}}return{}},[]),we=n.useCallback(async(e,r)=>{if(x.current[e]){const t=(await K(x,ye,x.current[e],ae))[e];return xe(e,t,r),O(t)}return!1},[xe,ye]),Ee=n.useCallback(async e=>{const{errors:r}=await fe.current(Me(),le.current,ye),t=Oe.current.isValid;if(g(e)){const t=e.map(e=>{const t=R(r,e);return t?p(Oe.current.errors,e,t):M(Oe.current.errors,e),!t}).every(Boolean);return Ve({isValid:L(r),errors:Oe.current.errors}),t}{const n=R(r,e);return xe(e,n,t!==L(r),{},L(r)),!n}},[xe,ye]),De=n.useCallback(async e=>{const r=e||Object.keys(x.current);if(fe.current)return Ee(r);if(g(r)){const e=await Promise.all(r.map(async e=>await we(e,null)));return Ve(),e.every(Boolean)}return await we(r,ve.current.isValid)},[Ee,we]),Ae=n.useCallback((e,r,{shouldDirty:t,shouldValidate:n})=>{const s={};p(s,e,r);for(const c of Q(e,r))x.current[c]&&(Ce(c,R(s,c)),t&&ke(c),n&&De(c))},[De,Ce,ke]),Be=n.useCallback((e,r,t={})=>{x.current[e]?(Ce(e,r),t.shouldDirty&&ke(e)):$(r)||(Ae(e,r,t),de.current.has(e)&&(E.current[e]=r,oe.current[e]({[e]:r}),(ve.current.isDirty||ve.current.dirtyFields)&&(p(Oe.current.dirtyFields,e,function e(r,t,n,s,c){let u=-1;for(;++u<r.length;){for(const s in r[u])g(r[u][s])?(!n[u]&&(n[u]={}),n[u][s]=[],e(r[u][s],R(t[u]||{},s,[]),n[u][s],n[u],s)):R(t[u]||{},s)===r[u][s]?p(n[u]||{},s):n[u]=Object.assign(Object.assign({},n[u]),{[s]:!0});!n.length&&s&&delete s[c]}return n.length?n:void 0}(r,R(z.current,e,[]),R(Oe.current.dirtyFields,e,[]))),Ve({isDirty:!H(Object.assign(Object.assign({},Me()),{[e]:r}),z.current),dirtyFields:Oe.current.dirtyFields})))),!h&&p(ae.current,e,r)},[ke,Ce,Ae]),We=e=>ee.current||D.current.has(e)||D.current.has((e.match(/\w+/)||[])[0]),Le=(e,r=!0)=>{if(!L(A.current))for(const t in A.current)e&&A.current[t].size&&!A.current[t].has(e)&&!A.current[t].has(Z(e))||(P.current[t](),r=!1);return r};function Pe(e){if(!h)for(const r of de.current)y(r)&&!e[r]&&(e=Object.assign(Object.assign({},e),{[r]:[]}));return e}function Me(e){if(T(e))return B(x,e,ae);if(g(e)){const r={};for(const t of e)p(r,t,B(x,t,ae));return r}return Pe(_(x,ae))}ie.current=ie.current?ie.current:async({type:e,target:r})=>{const t=r.name,n=x.current[t];let s,u;if(n){const r=e===c,i=Y(Object.assign({isBlurEvent:r,isReValidateOnChange:Fe,isReValidateOnBlur:Re,isTouched:!!R(Oe.current.touched,t),isSubmitted:Oe.current.isSubmitted},ge.current));let a=ke(t,!1),o=!L(a)||We(t);if(r&&!R(Oe.current.touched,t)&&ve.current.touched&&(p(Oe.current.touched,t,!0),a=Object.assign(Object.assign({},a),{touched:Oe.current.touched})),i)return Le(t),(!L(a)||o&&L(a))&&Ve(a);if(fe.current){const{errors:e}=await fe.current(Me(),le.current,ye),r=Oe.current.isValid;s=R(e,t),u=L(e),r!==u&&(o=!0)}else s=(await K(x,ye,n,ae))[t];Le(t),xe(t,s,o,a,u)}};const Ne=n.useCallback(async(e={})=>{const{errors:r}=await fe.current(Object.assign(Object.assign(Object.assign({},z.current),Me()),e),le.current,ye),t=L(r);Oe.current.isValid!==t&&Ve({isValid:t})},[ye]),Te=n.useCallback((e,r)=>function(e,r,t,n,s,c){const{ref:u,ref:{name:i,type:a}}=t,o=e.current[i];if(!s){const r=B(e,i,n);O(r)||p(n.current,i,r)}if(a)if((C(u)||k(u))&&o){const{options:t}=o;g(t)&&t.length?(j(t).forEach((e,n)=>{const{ref:s}=e;(s&&W(s)&&N(e,s)||c)&&(F(s,r),M(t,`[${n}]`))}),t&&!j(t).length&&delete e.current[i]):delete e.current[i]}else(W(u)&&N(o,u)||c)&&(F(u,r),delete e.current[i]);else delete e.current[i]}(x,ie.current,e,ae,h,r),[h]),$e=n.useCallback((e,r)=>{e&&(Te(e,r),h&&!j(e.options||[]).length&&(M(G.current,e.ref.name),M(U.current,e.ref.name),M(I.current,e.ref.name),M(Oe.current.errors,e.ref.name),p(Oe.current.dirtyFields,e.ref.name,!0),Ve({errors:Oe.current.errors,isDirty:Se(),dirtyFields:Oe.current.dirtyFields}),fe.current&&Ne()))},[Ne,Te]),_e=n.useCallback((e,r,t)=>{const n=t?A.current[t]:D.current,s=O(r)?z.current:r,c=_(x,ae,!1,e);return T(e)?X(c,e,n,O(r)?R(s,e):r,!0):g(e)?e.reduce((e,r)=>Object.assign(Object.assign({},e),{[r]:X(c,r,n,s)}),{}):(ee.current=O(t),v(!L(c)&&c||s))},[]);function He(e,r={}){const{name:t,type:n,value:a}=e,o=Object.assign({ref:e},r),l=x.current,f=ne(e),d=re(de.current,t),b=r=>ce&&(!s(e)||r===e);let y,h=l[t],v=!0;if(h&&(f?g(h.options)&&j(h.options).find(e=>a===e.ref.value&&b(e.ref)):b(h.ref)))return void(l[t]=Object.assign(Object.assign({},h),r));h=n?f?Object.assign({options:[...j(h&&h.options||[]),{ref:e}],ref:{type:n,name:t}},r):Object.assign({},o):o,l[t]=h;const F=O(R(ae.current,t));if(L(z.current)&&F||(y=R(F?z.current:ae.current,t),v=O(y),v||d||Ce(t,y)),L(r)||(p(I.current,t,!0),!be&&ve.current.isValid&&K(x,ye,h,ae).then(e=>{const r=Oe.current.isValid;L(e)?p(U.current,t,!0):M(U.current,t),r!==L(e)&&Ve()})),!(G.current[t]||d&&v)){const e=B(x,t,ae);p(G.current,t,v?m(e)?Object.assign({},e):e:y),!d&&M(Oe.current.dirtyFields,t)}n&&function({ref:e},r,t){s(e)&&t&&(e.addEventListener(r?u:i,t),e.addEventListener(c,t))}(f&&h.options?h.options[h.options.length-1]:h,f||"select-one"===e.type,ie.current)}const Ie=n.useCallback((e,r)=>async t=>{t&&t.preventDefault&&(t.preventDefault(),t.persist());let n={},s=Pe(_(x,ae,!0));ve.current.isSubmitting&&Ve({isSubmitting:!0});try{if(fe.current){const{errors:e,values:r}=await fe.current(s,le.current,ye);Oe.current.errors=e,n=e,s=r}else for(const e of Object.values(x.current))if(e){const{ref:{name:r}}=e,t=await K(x,ye,e,ae);t[r]?(p(n,r,t[r]),M(U.current,r)):R(I.current,r)&&(M(Oe.current.errors,r),p(U.current,r,!0))}L(n)&&Object.keys(Oe.current.errors).every(e=>e in x.current)?(Ve({errors:{},isSubmitting:!0}),await e(s,t)):(Oe.current.errors=Object.assign(Object.assign({},Oe.current.errors),n),r&&await r(n,t),b&&((e,r)=>{for(const t in e)if(R(r,t)){const r=e[t];if(r){if(r.ref.focus){r.ref.focus();break}if(r.options){r.options[0].ref.focus();break}}}})(x.current,n))}finally{Ve({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:L(Oe.current.errors),errors:Oe.current.errors,submitCount:Oe.current.submitCount+1})}},[b,ye]);je.current=je.current||!ce?je.current:function(e,r){const t=new MutationObserver(()=>{for(const t of Object.values(e.current))if(t&&t.options)for(const e of t.options)e&&e.ref&&W(e.ref)&&r(t);else t&&W(t.ref)&&r(t)});return t.observe(window.document,{childList:!0,subtree:!0}),t}(x,$e),n.useEffect(()=>(J.current=!1,t&&ve.current.isValid&&Ne(),()=>{J.current=!0,je.current&&je.current.disconnect(),ae.current={},x.current&&Object.values(x.current).forEach(e=>$e(e,!0))}),[$e]),!t&&ve.current.isValid&&(he.isValid=H(U.current,I.current)&&L(Oe.current.errors));const Ue={trigger:De,setValue:n.useCallback((function(e,r,t){Be(e,r,t),We(e)&&Ve(),Le(e),(t||{}).shouldValidate&&De(e)}),[Be,De]),getValues:n.useCallback(Me,[]),register:n.useCallback((function(e,r){if(!se)if(T(e))He({name:e},r);else{if(!m(e)||!("name"in e))return r=>r&&He(r,e);He(e,r)}}),[z.current]),unregister:n.useCallback((function(e){for(const r of g(e)?e:[e])$e(x.current[r],!0)}),[])},qe=Object.assign({renderWatchedInputs:Le,shouldUnregister:h,removeFieldEventListener:Te,watchInternal:_e,mode:ge.current,reValidateMode:{isReValidateOnBlur:Re,isReValidateOnChange:Fe},fieldsRef:x,isWatchAllRef:ee,watchFieldsRef:D,resetFieldArrayFunctionRef:oe,useWatchFieldsRef:A,useWatchRenderFunctionsRef:P,fieldArrayDefaultValuesRef:E,validFieldsRef:U,fieldsWithValidationRef:I,fieldArrayNamesRef:de,readFormStateRef:ve,formStateRef:Oe,defaultValuesRef:z,shallowFieldsStateRef:ae,updateFormState:Ve,validateResolver:t?Ne:void 0},Ue);return Object.assign({watch:function(e,r){return _e(e,r)},control:qe,formState:ue?new Proxy(he,{get:(e,r)=>{if(r in e)return ve.current[r]=!0,e[r]}}):he,handleSubmit:Ie,reset:n.useCallback((e,r={})=>{if(ce)for(const r of Object.values(x.current))if(r){const{ref:t,options:n}=r,c=ne(t)&&g(n)?n[0].ref:t;if(s(c))try{c.closest("form").reset();break}catch(e){}}x.current={},z.current=Object.assign({},e||z.current),e&&Le(""),ae.current=h?{}:Object.assign({},e)||{},Object.values(oe.current).forEach(e=>q(e)&&e()),(({errors:e,isDirty:r,isSubmitted:t,touched:n,isValid:s,submitCount:c,dirtyFields:u})=>{s||(U.current={},I.current={}),G.current={},E.current={},D.current=new Set,ee.current=!1,Ve({submitCount:c?Oe.current.submitCount:0,isDirty:!!r&&Oe.current.isDirty,isSubmitted:!!t&&Oe.current.isSubmitted,isValid:!!s&&Oe.current.isValid,dirtyFields:u?Oe.current.dirtyFields:{},touched:n?Oe.current.touched:{},errors:e?Oe.current.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})})(r)},[]),clearErrors:n.useCallback((function(e){e&&(g(e)?e:[e]).forEach(e=>x.current[e]?y(e)?delete Oe.current.errors[e]:p(Oe.current.errors,e,void 0):M(Oe.current.errors,e)),Ve({errors:e?Oe.current.errors:{}})}),[]),setError:n.useCallback((function(e,r){const t=(x.current[e]||{}).ref;p(Oe.current.errors,e,Object.assign(Object.assign({},r),{ref:t})),Ve({isValid:!1,errors:Oe.current.errors}),r.shouldFocus&&t&&t.focus&&t.focus()}),[]),errors:he.errors},Ue)},r.useFormContext=oe,r.useWatch=function({control:e,name:r,defaultValue:t}){const s=oe(),{useWatchFieldsRef:c,useWatchRenderFunctionsRef:u,watchInternal:i,defaultValuesRef:a}=e||s.control,[o,l]=n.useState(O(t)?T(r)?R(a.current,r):g(r)?r.reduce((e,r)=>Object.assign(Object.assign({},e),{[r]:R(a.current,r)}),{}):a.current:t),f=n.useRef(),d=n.useRef(t),b=n.useCallback(()=>{const e=i(r,d.current,f.current);l(m(e)?Object.assign({},e):g(e)?[...e]:e)},[l,i,d,r,f]);return n.useEffect(()=>{const e=f.current=le(),t=u.current,n=c.current;return n[e]=new Set,t[e]=b,i(r,d.current,e),()=>{delete n[e],delete t[e]}},[r,b,u,c,i,d]),O(o)?t:o}},function(e,r){e.exports=React}])}));
//# sourceMappingURL=ReactHookForm.min.js.map