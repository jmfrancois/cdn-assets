!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ReactDnd=t():e.ReactDnd=t()}(this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=11)}([function(e,t,r){"use strict";e.exports=function(e,t,r,n,o,i,s,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,n,o,i,s,a],u=0;(c=new Error(t.replace(/%s/g,(function(){return d[u++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(e,t){e.exports=React},function(e,t){e.exports=function(e,t,r,n){var o=r?r.call(n,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),c=0;c<i.length;c++){var d=i[c];if(!a(d))return!1;var u=e[d],l=t[d];if(!1===(o=r?r.call(n,u,l,d):void 0)||void 0===o&&u!==l)return!1}return!0}},function(e,t,r){"use strict";r.d(t,"a",(function(){return V})),r.d(t,"b",(function(){return W}));var n,o=r(1);!function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(n||(n={}));var i=r(7),s=r(0),a=r.n(s);const c="dnd-core/BEGIN_DRAG",d="dnd-core/HOVER",u="dnd-core/DROP",l="dnd-core/END_DRAG";function g(e,t){return{type:"dnd-core/INIT_COORDS",payload:{sourceClientOffset:t||null,clientOffset:e||null}}}function h(e){return"object"==typeof e}const p={type:"dnd-core/INIT_COORDS",payload:{clientOffset:null,sourceClientOffset:null}};function f(e){return function(t=[],r={publishSource:!0}){const{publishSource:n=!0,clientOffset:o,getSourceClientOffset:i}=r,s=e.getMonitor(),d=e.getRegistry();e.dispatch(g(o)),function(e,t,r){a()(!t.isDragging(),"Cannot call beginDrag while dragging.");for(const t of e)a()(r.getSource(t),"Expected sourceIds to be registered.")}(t,s,d);const u=function(e,t){let r=null;for(let n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}(t,s);if(null===u)return void e.dispatch(p);let l=null;o&&(!function(e){a()("function"==typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}(i),l=i(u)),e.dispatch(g(o,l));const f=d.getSource(u).beginDrag(s,u);!function(e){a()(h(e),"Item must be an object.")}(f),d.pinSource(u);const b=d.getSourceType(u);return{type:c,payload:{itemType:b,item:f,sourceId:u,clientOffset:o||null,sourceClientOffset:l||null,isSourcePublic:!!n}}}}function b(e){return function(){if(e.getMonitor().isDragging())return{type:"dnd-core/PUBLISH_DRAG_SOURCE"}}}function D(e,t){return null===t?null===e:Array.isArray(e)?e.some(e=>e===t):e===t}function y(e){return function(t,{clientOffset:r}={}){!function(e){a()(Array.isArray(e),"Expected targetIds to be an array.")}(t);const n=t.slice(0),o=e.getMonitor(),i=e.getRegistry();!function(e,t,r){a()(t.isDragging(),"Cannot call hover while not dragging."),a()(!t.didDrop(),"Cannot call hover after drop.");for(let t=0;t<e.length;t++){const n=e[t];a()(e.lastIndexOf(n)===t,"Expected targetIds to be unique in the passed array.");const o=r.getTarget(n);a()(o,"Expected targetIds to be registered.")}}(n,o,i);return function(e,t,r){for(let n=e.length-1;n>=0;n--){const o=e[n];D(t.getTargetType(o),r)||e.splice(n,1)}}(n,i,o.getItemType()),function(e,t,r){for(const n of e){r.getTarget(n).hover(t,n)}}(n,o,i),{type:d,payload:{targetIds:n,clientOffset:r||null}}}}function m(e){return function(t={}){const r=e.getMonitor(),n=e.getRegistry();!function(e){a()(e.isDragging(),"Cannot call drop while not dragging."),a()(!e.didDrop(),"Cannot call drop twice during one drag operation.")}(r);(function(e){const t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t})(r).forEach((o,i)=>{const s=function(e,t,r,n){const o=r.getTarget(e);let i=o?o.drop(n,e):void 0;(function(e){a()(void 0===e||h(e),"Drop result must either be an object or undefined.")})(i),void 0===i&&(i=0===t?{}:n.getDropResult());return i}(o,i,n,r),c={type:u,payload:{dropResult:{...t,...s}}};e.dispatch(c)})}}function O(e){return function(){const t=e.getMonitor(),r=e.getRegistry();!function(e){a()(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);const n=t.getSourceId();return r.getSource(n,!0).endDrag(t,n),r.unpinSource(),{type:l}}}const v=(e,t)=>e===t;const I={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function S(e=I,t){const{payload:r}=t;switch(t.type){case"dnd-core/INIT_COORDS":case c:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case d:return n=e.clientOffset,o=r.clientOffset,!n&&!o||n&&o&&n.x===o.x&&n.y===o.y?e:{...e,clientOffset:r.clientOffset};case l:case u:return I;default:return e}var n,o}const C="dnd-core/REMOVE_TARGET";const T={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function w(e=T,t){const{payload:r}=t;switch(t.type){case c:return{...e,itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1};case"dnd-core/PUBLISH_DRAG_SOURCE":return{...e,isSourcePublic:!0};case d:return{...e,targetIds:r.targetIds};case C:return-1===e.targetIds.indexOf(r.targetId)?e:{...e,targetIds:(n=e.targetIds,o=r.targetId,n.filter(e=>e!==o))};case u:return{...e,dropResult:r.dropResult,didDrop:!0,targetIds:[]};case l:return{...e,itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]};default:return e}var n,o}function R(e=0,t){switch(t.type){case"dnd-core/ADD_SOURCE":case"dnd-core/ADD_TARGET":return e+1;case"dnd-core/REMOVE_SOURCE":case C:return e-1;default:return e}}const E=[],x=[];function M(e=E,t){switch(t.type){case d:break;case"dnd-core/ADD_SOURCE":case"dnd-core/ADD_TARGET":case C:case"dnd-core/REMOVE_SOURCE":return E;case c:case"dnd-core/PUBLISH_DRAG_SOURCE":case l:case u:default:return x}const{targetIds:r=[],prevTargetIds:n=[]}=t.payload,o=function(e,t){const r=new Map,n=e=>r.set(e,r.has(e)?r.get(e)+1:1);e.forEach(n),t.forEach(n);const o=[];return r.forEach((e,t)=>{1===e&&o.push(t)}),o}(r,n);if(!(o.length>0||!function(e,t,r=v){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}(r,n)))return E;const i=n[n.length-1],s=r[r.length-1];return i!==s&&(i&&o.push(i),s&&o.push(s)),o}function P(e=0){return e+1}function j(e={},t){return{dirtyHandlerIds:M(e.dirtyHandlerIds,{type:t.type,payload:{...t.payload,prevTargetIds:(r=e,n="dragOperation.targetIds",o=[],n.split(".").reduce((e,t)=>e&&e[t]?e[t]:o||null,r))}}),dragOffset:S(e.dragOffset,t),refCount:R(e.refCount,t),dragOperation:w(e.dragOperation,t),stateId:P(e.stateId)};var r,n,o}function _(e,t){return{x:e.x-t.x,y:e.y-t.y}}E.__IS_NONE__=!0,x.__IS_ALL__=!0;class k{constructor(e,t){this.store=e,this.registry=t}subscribeToStateChange(e,t={handlerIds:void 0}){const{handlerIds:r}=t;a()("function"==typeof e,"listener must be a function."),a()(void 0===r||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let n=this.store.getState().stateId;return this.store.subscribe(()=>{const t=this.store.getState(),o=t.stateId;try{o===n||o===n+1&&!function(e,t){return e!==E&&(e===x||void 0===t||(r=e,t.filter(e=>r.indexOf(e)>-1)).length>0);var r}(t.dirtyHandlerIds,r)||e()}finally{n=o}})}subscribeToOffsetChange(e){a()("function"==typeof e,"listener must be a function.");let t=this.store.getState().dragOffset;return this.store.subscribe(()=>{const r=this.store.getState().dragOffset;r!==t&&(t=r,e())})}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return a()(t,"Expected to find a valid source."),!this.isDragging()&&t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(a()(t,"Expected to find a valid target."),!this.isDragging()||this.didDrop())return!1;return D(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}isDragging(){return Boolean(this.getItemType())}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(a()(t,"Expected to find a valid source."),!this.isDragging()||!this.isSourcePublic())return!1;return this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:r}=t;if(!this.isDragging())return!1;const n=this.registry.getTargetType(e),o=this.getItemType();if(o&&!D(n,o))return!1;const i=this.getTargetIds();if(!i.length)return!1;const s=i.indexOf(e);return r?s===i.length-1:s>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return function(e){const{clientOffset:t,initialClientOffset:r,initialSourceClientOffset:n}=e;return t&&r&&n?_((i=n,{x:(o=t).x+i.x,y:o.y+i.y}),r):null;var o,i}(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return function(e){const{clientOffset:t,initialClientOffset:r}=e;return t&&r?_(t,r):null}(this.store.getState().dragOffset)}}var H=r(8),A=r.n(H);let U=0;function N(e,t){t&&Array.isArray(e)?e.forEach(e=>N(e,!1)):a()("string"==typeof e||"symbol"==typeof e,t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}function F(e){const t=(U++).toString();switch(e){case n.SOURCE:return"S"+t;case n.TARGET:return"T"+t;default:throw new Error("Unknown Handler Role: "+e)}}function G(e){switch(e[0]){case"S":return n.SOURCE;case"T":return n.TARGET;default:a()(!1,"Cannot parse handler ID: "+e)}}function $(e,t){const r=e.entries();let n=!1;do{const{done:e,value:[,o]}=r.next();if(o===t)return!0;n=e}while(!n);return!1}class L{constructor(e){this.store=e,this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null}addSource(e,t){N(e),function(e){a()("function"==typeof e.canDrag,"Expected canDrag to be a function."),a()("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),a()("function"==typeof e.endDrag,"Expected endDrag to be a function.")}(t);const r=this.addHandler(n.SOURCE,e,t);return this.store.dispatch(function(e){return{type:"dnd-core/ADD_SOURCE",payload:{sourceId:e}}}(r)),r}addTarget(e,t){N(e,!0),function(e){a()("function"==typeof e.canDrop,"Expected canDrop to be a function."),a()("function"==typeof e.hover,"Expected hover to be a function."),a()("function"==typeof e.drop,"Expected beginDrag to be a function.")}(t);const r=this.addHandler(n.TARGET,e,t);return this.store.dispatch(function(e){return{type:"dnd-core/ADD_TARGET",payload:{targetId:e}}}(r)),r}containsHandler(e){return $(this.dragSources,e)||$(this.dropTargets,e)}getSource(e,t=!1){a()(this.isSourceId(e),"Expected a valid source ID.");return t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return a()(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return a()(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return a()(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return G(e)===n.SOURCE}isTargetId(e){return G(e)===n.TARGET}removeSource(e){a()(this.getSource(e),"Expected an existing source."),this.store.dispatch(function(e){return{type:"dnd-core/REMOVE_SOURCE",payload:{sourceId:e}}}(e)),A()(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){a()(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function(e){return{type:C,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);a()(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){a()(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,r){const o=F(e);return this.types.set(o,t),e===n.SOURCE?this.dragSources.set(o,r):e===n.TARGET&&this.dropTargets.set(o,r),o}}class B{constructor(e,t={},r=!1){this.context=t,this.isSetUp=!1,this.handleRefCountChange=()=>{const e=this.store.getState().refCount>0;e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1)};const n=function(e){const t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return Object(i.createStore)(j,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(r);this.store=n,this.monitor=new k(n,new L(n)),this.backend=e(this),n.subscribe(this.handleRefCountChange)}getContext(){return this.context}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;const r=function(e){return{beginDrag:f(e),publishDragSource:b(e),hover:y(e),drop:m(e),endDrag:O(e)}}(this);return Object.keys(r).reduce((n,o)=>{const i=r[o];var s;return n[o]=(s=i,(...r)=>{const n=s.apply(e,r);void 0!==n&&t(n)}),n},{})}dispatch(e){this.store.dispatch(e)}}function q(e,t,r){return new B(e,t,r)}const V=o.createContext({dragDropManager:void 0});function W(e,t,r){return{dragDropManager:q(e,t,r)}}},function(e,t,r){"use strict";var n=r(10),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return n.isMemo(e)?s:a[e.$$typeof]||o}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=s;var d=Object.defineProperty,u=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,g=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,r,n){if("string"!=typeof r){if(p){var o=h(r);o&&o!==p&&e(t,o,n)}var s=u(r);l&&(s=s.concat(l(r)));for(var a=c(t),f=c(r),b=0;b<s.length;++b){var D=s[b];if(!(i[D]||n&&n[D]||f&&f[D]||a&&a[D])){var y=g(r,D);try{d(t,D,y)}catch(e){}}}}return t}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return i}));var n=r(1),o=r(3);const i=Object(n.memo)(({children:t,...r})=>{const i="manager"in r?{dragDropManager:r.manager}:function(t,r=function(){return void 0!==e?e:window}(),n){const i=r;i[s]||(i[s]=Object(o.b)(t,r,n));return i[s]}(r.backend,r.context,r.debugMode);return n.createElement(o.a.Provider,{value:i},t)}),s=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__")}).call(this,r(5))},function(e,t){e.exports=Redux},function(e,t,r){"use strict";var n=r(9),o=[],i=[],s=n.makeRequestCallFromTimer((function(){if(i.length)throw i.shift()}));function a(e){var t;(t=o.length?o.pop():new c).task=e,n(t)}function c(){this.task=null}e.exports=a,c.prototype.call=function(){try{this.task.call()}catch(e){a.onerror?a.onerror(e):(i.push(e),s())}finally{this.task=null,o[o.length]=this}}},function(e,t,r){"use strict";(function(t){function r(e){o.length||(n(),!0),o[o.length]=e}e.exports=r;var n,o=[],i=0;function s(){for(;i<o.length;){var e=i;if(i+=1,o[e].call(),i>1024){for(var t=0,r=o.length-i;t<r;t++)o[t]=o[t+i];o.length-=i,i=0}}o.length=0,i=0,!1}var a,c,d,u=void 0!==t?t:self,l=u.MutationObserver||u.WebKitMutationObserver;function g(e){return function(){var t=setTimeout(n,0),r=setInterval(n,50);function n(){clearTimeout(t),clearInterval(r),e()}}}"function"==typeof l?(a=1,c=new l(s),d=document.createTextNode(""),c.observe(d,{characterData:!0}),n=function(){a=-a,d.data=a}):n=g(s),r.requestFlush=n,r.makeRequestCallFromTimer=g}).call(this,r(5))},function(e,t){e.exports=ReactIs},function(e,t,r){"use strict";r.r(t),r.d(t,"DndContext",(function(){return n.a})),r.d(t,"createDndContext",(function(){return n.b})),r.d(t,"DndProvider",(function(){return o.a})),r.d(t,"DragPreviewImage",(function(){return s})),r.d(t,"useDrag",(function(){return C})),r.d(t,"useDrop",(function(){return E})),r.d(t,"useDragLayer",(function(){return x})),r.d(t,"DragSource",(function(){return W})),r.d(t,"DropTarget",(function(){return K})),r.d(t,"DragLayer",(function(){return z})),r.d(t,"DragDropContext",(function(){return J}));var n=r(3),o=r(6),i=r(1);const s=i.memo(({connect:e,src:t})=>{if("undefined"!=typeof Image){const r=new Image;r.src=t,r.onload=()=>e(r)}return null});s.displayName="DragPreviewImage";var a=r(0),c=r.n(a),d=r(2),u=r.n(d);function l(e,t,r){const[n,o]=Object(i.useState)(()=>t(e)),s=Object(i.useCallback)(()=>{const i=t(e);u()(n,i)||(o(i),r&&r())},[n,e,r]);return[n,s]}function g(e,t,r){const[n,o]=l(e,t,r);return Object(i.useEffect)((function(){const t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(o,{handlerIds:[t]})}),[e,o]),n}function h(e,t,r){const n=r.getRegistry(),o=n.addTarget(e,t);return[o,()=>n.removeTarget(o)]}function p(e,t,r){const n=r.getRegistry(),o=n.addSource(e,t);return[o,()=>n.removeSource(o)]}function f(){const{dragDropManager:e}=Object(i.useContext)(n.a);return c()(null!=e,"Expected drag drop context"),e}let b=!1,D=!1;class y{constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){c()(!b,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return b=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{b=!1}}isDragging(){if(!this.sourceId)return!1;c()(!D,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return D=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{D=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}}function m(e,t){"function"==typeof e?e(t):e.current=t}function O(e){return(t=null,r=null)=>{if(!Object(i.isValidElement)(t)){const n=t;return e(n,r),n}const n=t;!function(e){if("string"==typeof e.type)return;const t=e.type.displayName||e.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}(n);return function(e,t){const r=e.ref;return c()("string"!=typeof r,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute"),r?Object(i.cloneElement)(e,{ref:e=>{m(t,e),r&&m(r,e)}}):Object(i.cloneElement)(e,{ref:t})}(n,r?t=>e(t,r):e)}}function v(e){const t={};return Object.keys(e).forEach(r=>{const n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{const e=O(n);t[r]=()=>e}}),t}function I(e){return null!==e&&"object"==typeof e&&e.hasOwnProperty("current")}class S{constructor(e){this.backend=e,this.hooks=v({dragSource:(e,t)=>{this.dragSourceOptions=t||null,I(e)?this.dragSourceRef=e:this.dragSourceNode=e,this.reconnectDragSource()},dragPreview:(e,t)=>{this.dragPreviewOptions=t||null,I(e)?this.dragPreviewRef=e:this.dragPreviewNode=e,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null}receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){this.reconnectDragSource(),this.reconnectDragPreview()}reconnectDragSource(){const e=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();e&&this.disconnectDragSource();const t=this.dragSource;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)):this.lastConnectedDragSource=t)}reconnectDragPreview(){const e=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();e&&this.disconnectDragPreview();const t=this.dragPreview;this.handlerId&&t&&e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!u()(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!u()(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}}function C(e){const t=Object(i.useRef)(e);t.current=e,c()(null!=e.item,"item must be defined"),c()(null!=e.item.type,"item type must be defined");const[r,n]=function(){const e=f();return[Object(i.useMemo)(()=>new y(e),[e]),Object(i.useMemo)(()=>new S(e.getBackend()),[e])]}();!function(e,t,r){const n=f(),o=Object(i.useMemo)(()=>({beginDrag(){const{begin:r,item:n}=e.current;if(r){const e=r(t);return c()(null==e||"object"==typeof e,"dragSpec.begin() must either return an object, undefined, or null"),e||n||{}}return n||{}},canDrag:()=>"boolean"==typeof e.current.canDrag?e.current.canDrag:"function"!=typeof e.current.canDrag||e.current.canDrag(t),isDragging(r,n){const{isDragging:o}=e.current;return o?o(t):n===r.getSourceId()},endDrag(){const{end:n}=e.current;n&&n(t.getItem(),t),r.reconnect()}}),[]);Object(i.useEffect)((function(){const[i,s]=p(e.current.item.type,o,n);return t.receiveHandlerId(i),r.receiveHandlerId(i),s}),[])}(t,r,n);const o=g(r,t.current.collect||(()=>({})),()=>n.reconnect()),s=Object(i.useMemo)(()=>n.hooks.dragSource(),[n]),a=Object(i.useMemo)(()=>n.hooks.dragPreview(),[n]);return Object(i.useEffect)(()=>{n.dragSourceOptions=t.current.options||null,n.reconnect()},[n]),Object(i.useEffect)(()=>{n.dragPreviewOptions=t.current.previewOptions||null,n.reconnect()},[n]),[o,s,a]}class T{constructor(e){this.backend=e,this.hooks=v({dropTarget:(e,t)=>{this.dropTargetOptions=t,I(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null}get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!u()(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}}let w=!1;class R{constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;c()(!w,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return w=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{w=!1}}isOver(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}}function E(e){const t=Object(i.useRef)(e);t.current=e,c()(null!=e.accept,"accept must be defined");const[r,n]=function(){const e=f();return[Object(i.useMemo)(()=>new R(e),[e]),Object(i.useMemo)(()=>new T(e.getBackend()),[e])]}();!function(e,t,r){const n=f(),o=Object(i.useMemo)(()=>({canDrop(){const{canDrop:r}=e.current;return!r||r(t.getItem(),t)},hover(){const{hover:r}=e.current;r&&r(t.getItem(),t)},drop(){const{drop:r}=e.current;if(r)return r(t.getItem(),t)}}),[t]);Object(i.useEffect)((function(){const[i,s]=h(e.current.accept,o,n);return t.receiveHandlerId(i),r.receiveHandlerId(i),s}),[t,r])}(t,r,n);const o=g(r,t.current.collect||(()=>({})),()=>n.reconnect()),s=Object(i.useMemo)(()=>n.hooks.dropTarget(),[n]);return Object(i.useEffect)(()=>{n.dropTargetOptions=e.options||null,n.reconnect()},[e.options]),[o,s]}function x(e){const t=f().getMonitor(),[r,n]=l(t,e);return Object(i.useEffect)(()=>t.subscribeToOffsetChange(n)),Object(i.useEffect)(()=>t.subscribeToStateChange(n)),r}function M(e){return"function"==typeof e}function P(){}function j(e){if(!function(e){return"object"==typeof e&&null!==e}(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function _(e){const t=e.current;return null==t?null:t.decoratedRef?t.decoratedRef.current:t}function k(e){return(t=e)&&t.prototype&&"function"==typeof t.prototype.render||function(e){return e&&e.$$typeof&&"Symbol(react.forward_ref)"===e.$$typeof.toString()}(e);var t}function H(e,t,...r){0}var A=r(4),U=r.n(A);class N{constructor(e){this.isDisposed=!1,this.action=M(e)?e:P}static isDisposable(e){return e&&M(e.dispose)}static _fixup(e){return N.isDisposable(e)?e:N.empty}static create(e){return new N(e)}dispose(){this.isDisposed||(this.action(),this.isDisposed=!0)}}N.empty={dispose:P};class F{constructor(...e){this.isDisposed=!1,this.disposables=e}add(e){this.isDisposed?e.dispose():this.disposables.push(e)}remove(e){let t=!1;if(!this.isDisposed){const r=this.disposables.indexOf(e);-1!==r&&(t=!0,this.disposables.splice(r,1),e.dispose())}return t}clear(){if(!this.isDisposed){const e=this.disposables.length,t=new Array(e);for(let r=0;r<e;r++)t[r]=this.disposables[r];this.disposables=[];for(let r=0;r<e;r++)t[r].dispose()}}dispose(){if(!this.isDisposed){this.isDisposed=!0;const e=this.disposables.length,t=new Array(e);for(let r=0;r<e;r++)t[r]=this.disposables[r];this.disposables=[];for(let r=0;r<e;r++)t[r].dispose()}}}class G{constructor(){this.isDisposed=!1}getDisposable(){return this.current}setDisposable(e){const t=this.isDisposed;if(!t){const t=this.current;this.current=e,t&&t.dispose()}t&&e&&e.dispose()}dispose(){if(!this.isDisposed){this.isDisposed=!0;const e=this.current;this.current=void 0,e&&e.dispose()}}}function $({DecoratedComponent:e,createHandler:t,createMonitor:r,createConnector:o,registerHandler:s,containerDisplayName:a,getType:d,collect:l,options:g}){const{arePropsEqual:h=u.a}=g,p=e,f=e.displayName||e.name||"Component";class b extends i.Component{constructor(e){super(e),this.decoratedRef=i.createRef(),this.handleChange=()=>{const e=this.getCurrentState();u()(e,this.state)||this.setState(e)},this.disposable=new G,this.receiveProps(e),this.dispose()}getHandlerId(){return this.handlerId}getDecoratedComponentInstance(){return c()(this.decoratedRef.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.decoratedRef.current}shouldComponentUpdate(e,t){return!h(e,this.props)||!u()(t,this.state)}componentDidMount(){this.disposable=new G,this.currentType=void 0,this.receiveProps(this.props),this.handleChange()}componentDidUpdate(e){h(this.props,e)||(this.receiveProps(this.props),this.handleChange())}componentWillUnmount(){this.dispose()}receiveProps(e){this.handler&&(this.handler.receiveProps(e),this.receiveType(d(e)))}receiveType(e){if(!this.handlerMonitor||!this.manager||!this.handlerConnector)return;if(e===this.currentType)return;this.currentType=e;const[t,r]=s(e,this.handler,this.manager);this.handlerId=t,this.handlerMonitor.receiveHandlerId(t),this.handlerConnector.receiveHandlerId(t);const n=this.manager.getMonitor().subscribeToStateChange(this.handleChange,{handlerIds:[t]});this.disposable.setDisposable(new F(new N(n),new N(r)))}dispose(){this.disposable.dispose(),this.handlerConnector&&this.handlerConnector.receiveHandlerId(null)}getCurrentState(){if(!this.handlerConnector)return{};return l(this.handlerConnector.hooks,this.handlerMonitor,this.props)}render(){return i.createElement(n.a.Consumer,null,({dragDropManager:e})=>(this.receiveDragDropManager(e),"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(()=>this.handlerConnector.reconnect()),i.createElement(p,Object.assign({},this.props,this.getCurrentState(),{ref:k(p)?this.decoratedRef:null}))))}receiveDragDropManager(e){void 0===this.manager&&(c()(void 0!==e,"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",f,f),void 0!==e&&(this.manager=e,this.handlerMonitor=r(e),this.handlerConnector=o(e.getBackend()),this.handler=t(this.handlerMonitor,this.decoratedRef)))}}return b.DecoratedComponent=e,b.displayName=`${a}(${f})`,U()(b,e)}function L(e,t){return"string"==typeof e||"symbol"==typeof e||!!t&&Array.isArray(e)&&e.every(e=>L(e,!1))}const B=["canDrag","beginDrag","isDragging","endDrag"],q=["beginDrag"];class V{constructor(e,t,r){this.spec=e,this.monitor=t,this.ref=r,this.props=null,this.beginDrag=()=>{if(!this.props)return;return this.spec.beginDrag(this.props,this.monitor,this.ref.current)}}receiveProps(e){this.props=e}canDrag(){return!!this.props&&(!this.spec.canDrag||this.spec.canDrag(this.props,this.monitor))}isDragging(e,t){return!!this.props&&(this.spec.isDragging?this.spec.isDragging(this.props,this.monitor):t===e.getSourceId())}endDrag(){this.props&&this.spec.endDrag&&this.spec.endDrag(this.props,this.monitor,_(this.ref))}}function W(e,t,r,n={}){H(0,0);let o=e;"function"!=typeof e&&(c()(L(e),'Expected "type" provided as the first argument to DragSource to be a string, or a function that returns a string given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',e),o=()=>e),c()(j(t),'Expected "spec" provided as the second argument to DragSource to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',t);const i=function(e){return Object.keys(e).forEach(t=>{c()(B.indexOf(t)>-1,'Expected the drag source specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',B.join(", "),t),c()("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])}),q.forEach(t=>{c()("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])}),function(t,r){return new V(e,t,r)}}(t);return c()("function"==typeof r,'Expected "collect" provided as the third argument to DragSource to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',r),c()(j(n),'Expected "options" provided as the fourth argument to DragSource to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',r),function(e){return $({containerDisplayName:"DragSource",createHandler:i,registerHandler:p,createConnector:e=>new S(e),createMonitor:e=>new y(e),DecoratedComponent:e,getType:o,collect:r,options:n})}}const Y=["canDrop","hover","drop"];class X{constructor(e,t,r){this.spec=e,this.monitor=t,this.ref=r,this.props=null}receiveProps(e){this.props=e}receiveMonitor(e){this.monitor=e}canDrop(){return!this.spec.canDrop||this.spec.canDrop(this.props,this.monitor)}hover(){this.spec.hover&&this.spec.hover(this.props,this.monitor,_(this.ref))}drop(){if(!this.spec.drop)return;return this.spec.drop(this.props,this.monitor,this.ref.current)}}function K(e,t,r,n={}){H(0,0);let o=e;"function"!=typeof e&&(c()(L(e,!0),'Expected "type" provided as the first argument to DropTarget to be a string, an array of strings, or a function that returns either given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',e),o=()=>e),c()(j(t),'Expected "spec" provided as the second argument to DropTarget to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',t);const i=function(e){return Object.keys(e).forEach(t=>{c()(Y.indexOf(t)>-1,'Expected the drop target specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',Y.join(", "),t),c()("function"==typeof e[t],"Expected %s in the drop target specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target",t,t,e[t])}),function(t,r){return new X(e,t,r)}}(t);return c()("function"==typeof r,'Expected "collect" provided as the third argument to DropTarget to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',r),c()(j(n),'Expected "options" provided as the fourth argument to DropTarget to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',r),function(e){return $({containerDisplayName:"DropTarget",createHandler:i,registerHandler:h,createMonitor:e=>new R(e),createConnector:e=>new T(e),DecoratedComponent:e,getType:o,collect:r,options:n})}}function z(e,t={}){return H(0,0),c()("function"==typeof e,'Expected "collect" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ',"Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer",e),c()(j(t),'Expected "options" provided as the second argument to DragLayer to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer',t),function(r){const o=r,{arePropsEqual:s=u.a}=t,a=o.displayName||o.name||"Component";class d extends i.Component{constructor(){super(...arguments),this.isCurrentlyMounted=!1,this.ref=i.createRef(),this.handleChange=()=>{if(!this.isCurrentlyMounted)return;const e=this.getCurrentState();u()(e,this.state)||this.setState(e)}}getDecoratedComponentInstance(){return c()(this.ref.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.ref.current}shouldComponentUpdate(e,t){return!s(e,this.props)||!u()(t,this.state)}componentDidMount(){this.isCurrentlyMounted=!0,this.handleChange()}componentWillUnmount(){this.isCurrentlyMounted=!1,this.unsubscribeFromOffsetChange&&(this.unsubscribeFromOffsetChange(),this.unsubscribeFromOffsetChange=void 0),this.unsubscribeFromStateChange&&(this.unsubscribeFromStateChange(),this.unsubscribeFromStateChange=void 0)}render(){return i.createElement(n.a.Consumer,null,({dragDropManager:e})=>void 0===e?null:(this.receiveDragDropManager(e),this.isCurrentlyMounted?i.createElement(o,Object.assign({},this.props,this.state,{ref:k(o)?this.ref:null})):null))}receiveDragDropManager(e){if(void 0!==this.manager)return;this.manager=e,c()("object"==typeof e,"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",a,a);const t=this.manager.getMonitor();this.unsubscribeFromOffsetChange=t.subscribeToOffsetChange(this.handleChange),this.unsubscribeFromStateChange=t.subscribeToStateChange(this.handleChange)}getCurrentState(){if(!this.manager)return{};const t=this.manager.getMonitor();return e(t,this.props)}}return d.displayName=`DragLayer(${a})`,d.DecoratedComponent=r,U()(d,r)}}function J(e,t,r){H(0,0);const o=Object(n.b)(e,t,r);return function(e){const t=e,r=t.displayName||t.name||"Component";class s extends i.Component{constructor(e,t){super(e,t),this.ref=i.createRef(),this.getManager=()=>o.dragDropManager,console.warn("DragDropContext has been deprecated and will be removed in a future version. Please use DndProvider instead.")}getDecoratedComponentInstance(){return c()(this.ref.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.ref.current}render(){return i.createElement(n.a.Provider,{value:o},i.createElement(t,Object.assign({},this.props,{ref:k(t)?this.ref:null})))}}return s.DecoratedComponent=e,s.displayName=`DragDropContext(${r})`,U()(s,e)}}}])}));
//# sourceMappingURL=ReactDnd.min.js.map